diff --git a/node_modules/@vanilla-extract/vite-plugin/dist/vanilla-extract-vite-plugin.cjs.dev.js b/node_modules/@vanilla-extract/vite-plugin/dist/vanilla-extract-vite-plugin.cjs.dev.js
index 70e1c55..85b3779 100644
--- a/node_modules/@vanilla-extract/vite-plugin/dist/vanilla-extract-vite-plugin.cjs.dev.js
+++ b/node_modules/@vanilla-extract/vite-plugin/dist/vanilla-extract-vite-plugin.cjs.dev.js
@@ -21,6 +21,7 @@ function vanillaExtractPlugin({
   let config;
   let packageInfo;
   let server;
+  let useRuntime = false;
   const cssMap = new Map();
   let virtualExt;
   return {
@@ -32,7 +33,8 @@ function vanillaExtractPlugin({
     },

     config(_userConfig, env) {
-      const include = env.command === 'serve' ? ['@vanilla-extract/css/injectStyles'] : [];
+      useRuntime = server && env.command === 'serve'
+      const include = useRuntime ? ['@vanilla-extract/css/injectStyles'] : [];
       return {
         optimizeDeps: {
           include
@@ -45,7 +47,7 @@ function vanillaExtractPlugin({

     configResolved(resolvedConfig) {
       config = resolvedConfig;
-      virtualExt = `.vanilla.${config.command === 'serve' ? 'js' : 'css'}`;
+      virtualExt = `.vanilla.${useRuntime ? 'js' : 'css'}`;
       packageInfo = integration.getPackageInfo(config.root);
     },

@@ -65,7 +67,7 @@ function vanillaExtractPlugin({

         const css = cssMap.get(fileScopeId);

-        if (!server) {
+        if (!useRuntime) {
           return css;
         }

diff --git a/node_modules/@vanilla-extract/vite-plugin/dist/vanilla-extract-vite-plugin.cjs.prod.js b/node_modules/@vanilla-extract/vite-plugin/dist/vanilla-extract-vite-plugin.cjs.prod.js
index 70e1c55..85b3779 100644
--- a/node_modules/@vanilla-extract/vite-plugin/dist/vanilla-extract-vite-plugin.cjs.prod.js
+++ b/node_modules/@vanilla-extract/vite-plugin/dist/vanilla-extract-vite-plugin.cjs.prod.js
@@ -21,6 +21,7 @@ function vanillaExtractPlugin({
   let config;
   let packageInfo;
   let server;
+  let useRuntime = false;
   const cssMap = new Map();
   let virtualExt;
   return {
@@ -32,7 +33,8 @@ function vanillaExtractPlugin({
     },

     config(_userConfig, env) {
-      const include = env.command === 'serve' ? ['@vanilla-extract/css/injectStyles'] : [];
+      useRuntime = server && env.command === 'serve'
+      const include = useRuntime ? ['@vanilla-extract/css/injectStyles'] : [];
       return {
         optimizeDeps: {
           include
@@ -45,7 +47,7 @@ function vanillaExtractPlugin({

     configResolved(resolvedConfig) {
       config = resolvedConfig;
-      virtualExt = `.vanilla.${config.command === 'serve' ? 'js' : 'css'}`;
+      virtualExt = `.vanilla.${useRuntime ? 'js' : 'css'}`;
       packageInfo = integration.getPackageInfo(config.root);
     },

@@ -65,7 +67,7 @@ function vanillaExtractPlugin({

         const css = cssMap.get(fileScopeId);

-        if (!server) {
+        if (!useRuntime) {
           return css;
         }

