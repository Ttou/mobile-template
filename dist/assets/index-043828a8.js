import{h as S,d as _,z as we,n as w,A as h,C as Se,c as E,r as be,i as pe,D as Oe,I as V,E as G,t as T,F as H,G as xe,H as Ie,J as ae,T as le,g as Be,K as q,v as ie,P as ze,L as Pe,f as Te,M as Ae,N as _e,O as Ee,x as Re,p as $e,Q as Le,R as De,S as Ne,q as O}from"./ajax-faf91e76.js";import{g as se,c as o,d as I,a as K,r as g,H as ce,O as Me,w as A,e as re,n as Ue,o as ue,L as Fe,K as He,X as Ke,Y as j,m as Z,G as Ye,b as J,Z as Xe,t as de,f as je,_ as x}from"./index-52f5b0f7.js";function fe(e){const n=se();n&&S(n.proxy,e)}const[Ve,D]=_("loading"),Ge=Array(12).fill(null).map((e,n)=>o("i",{class:D("line",String(n+1))},null)),qe=o("svg",{class:D("circular"),viewBox:"25 25 50 50"},[o("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ze={size:w,type:h("circular"),color:String,vertical:Boolean,textSize:w,textColor:String};var Je=I({name:Ve,props:Ze,setup(e,{slots:n}){const t=K(()=>S({color:e.color},we(e.size))),s=()=>{const a=e.type==="spinner"?Ge:qe;return o("span",{class:D("spinner",e.type),style:t.value},[n.icon?n.icon():a])},i=()=>{var a;if(n.default)return o("span",{class:D("text"),style:{fontSize:Se(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[n.default()])};return()=>{const{type:a,vertical:l}=e;return o("div",{class:D([a,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[s(),i()])}}});const ve=E(Je),[Qe,B]=_("button"),We=S({},be,{tag:h("button"),text:String,icon:String,type:h("default"),size:h("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:h("button"),loadingSize:w,loadingText:String,loadingType:String,iconPosition:h("left")});var en=I({name:Qe,props:We,emits:["click"],setup(e,{emit:n,slots:t}){const s=pe(),i=()=>t.loading?t.loading():o(ve,{size:e.loadingSize,type:e.loadingType,class:B("loading")},null),a=()=>{if(e.loading)return i();if(t.icon)return o("div",{class:B("icon")},[t.icon()]);if(e.icon)return o(V,{name:e.icon,class:B("icon"),classPrefix:e.iconPrefix},null)},l=()=>{let c;if(e.loading?c=e.loadingText:c=t.default?t.default():e.text,c)return o("span",{class:B("text")},[c])},u=()=>{const{color:c,plain:m}=e;if(c){const r={color:m?c:"white"};return m||(r.background=c),c.includes("gradient")?r.border=0:r.borderColor=c,r}},v=c=>{e.loading?G(c):e.disabled||(n("click",c),s())};return()=>{const{tag:c,type:m,size:r,block:d,round:y,plain:C,square:b,loading:k,disabled:N,hairline:M,nativeType:Y,iconPosition:R}=e,f=[B([m,r,{plain:C,block:d,round:y,square:b,loading:k,disabled:N,hairline:M}]),{[Oe]:M}];return o(c,{type:Y,class:f,style:u(),disabled:N,onClick:v},{default:()=>[o("div",{class:B("content")},[R==="left"&&a(),l(),R==="right"&&a()])]})}}});const Q=E(en),nn={show:Boolean,zIndex:w,overlay:T,duration:w,teleport:[String,Object],lockScroll:T,lazyRender:T,beforeClose:Function,overlayStyle:Object,overlayClass:H,transitionAppear:Boolean,closeOnClickOverlay:T};function tn(e,n){return e>n?"horizontal":n>e?"vertical":""}function on(){const e=g(0),n=g(0),t=g(0),s=g(0),i=g(0),a=g(0),l=g(""),u=()=>l.value==="vertical",v=()=>l.value==="horizontal",c=()=>{t.value=0,s.value=0,i.value=0,a.value=0,l.value=""};return{move:d=>{const y=d.touches[0];t.value=(y.clientX<0?0:y.clientX)-e.value,s.value=y.clientY-n.value,i.value=Math.abs(t.value),a.value=Math.abs(s.value);const C=10;(!l.value||i.value<C&&a.value<C)&&(l.value=tn(i.value,a.value))},start:d=>{c(),e.value=d.touches[0].clientX,n.value=d.touches[0].clientY},reset:c,startX:e,startY:n,deltaX:t,deltaY:s,offsetX:i,offsetY:a,direction:l,isVertical:u,isHorizontal:v}}let $=0;const W="van-overflow-hidden";function an(e,n){const t=on(),s="01",i="10",a=m=>{t.move(m);const r=t.deltaY.value>0?i:s,d=Ie(m.target,e.value),{scrollHeight:y,offsetHeight:C,scrollTop:b}=d;let k="11";b===0?k=C>=y?"00":"01":b+C>=y&&(k="10"),k!=="11"&&t.isVertical()&&!(parseInt(k,2)&parseInt(r,2))&&G(m,!0)},l=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",a,{passive:!1}),$||document.body.classList.add(W),$++},u=()=>{$&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",a),$--,$||document.body.classList.remove(W))},v=()=>n()&&l(),c=()=>n()&&u();xe(v),ce(c),Me(c),A(n,m=>{m?l():u()})}function me(e){const n=g(!1);return A(e,t=>{t&&(n.value=t)},{immediate:!0}),t=>()=>n.value?t():null}const[ln,sn]=_("overlay"),cn={show:Boolean,zIndex:w,duration:w,className:H,lockScroll:T,lazyRender:T,customStyle:Object};var rn=I({name:ln,props:cn,setup(e,{slots:n}){const t=g(),s=me(()=>e.show||!e.lazyRender),i=l=>{e.lockScroll&&G(l,!0)},a=s(()=>{var l;const u=S(Be(e.zIndex),e.customStyle);return q(e.duration)&&(u.animationDuration=`${e.duration}s`),re(o("div",{ref:t,style:u,class:[sn(),e.className]},[(l=n.default)==null?void 0:l.call(n)]),[[ie,e.show]])});return ae("touchmove",i,{target:t}),()=>o(le,{name:"van-fade",appear:!0},{default:a})}});const un=E(rn),dn=S({},nn,{round:Boolean,position:h("center"),closeIcon:h("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:h("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[fn,ee]=_("popup");var vn=I({name:fn,inheritAttrs:!1,props:dn,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:n,attrs:t,slots:s}){let i,a;const l=g(),u=g(),v=me(()=>e.show||!e.lazyRender),c=K(()=>{const f={zIndex:l.value};if(q(e.duration)){const p=e.position==="center"?"animationDuration":"transitionDuration";f[p]=`${e.duration}s`}return f}),m=()=>{i||(i=!0,l.value=e.zIndex!==void 0?+e.zIndex:Pe(),n("open"))},r=()=>{i&&Te(e.beforeClose,{done(){i=!1,n("close"),n("update:show",!1)}})},d=f=>{n("clickOverlay",f),e.closeOnClickOverlay&&r()},y=()=>{if(e.overlay)return o(un,{show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:d},{default:s["overlay-content"]})},C=f=>{n("clickCloseIcon",f),r()},b=()=>{if(e.closeable)return o(V,{role:"button",tabindex:0,name:e.closeIcon,class:[ee("close-icon",e.closeIconPosition),Ae],classPrefix:e.iconPrefix,onClick:C},null)},k=()=>n("opened"),N=()=>n("closed"),M=f=>n("keydown",f),Y=v(()=>{var f;const{round:p,position:U,safeAreaInsetTop:X,safeAreaInsetBottom:ke}=e;return re(o("div",Z({ref:u,style:c.value,role:"dialog",tabindex:0,class:[ee({round:p,[U]:U}),{"van-safe-area-top":X,"van-safe-area-bottom":ke}],onKeydown:M},t),[(f=s.default)==null?void 0:f.call(s),b()]),[[ie,e.show]])}),R=()=>{const{position:f,transition:p,transitionAppear:U}=e,X=f==="center"?"van-fade":`van-popup-slide-${f}`;return o(le,{name:p||X,appear:U,onAfterEnter:k,onAfterLeave:N},{default:Y})};return A(()=>e.show,f=>{f&&!i&&(m(),t.tabindex===0&&Ue(()=>{var p;(p=u.value)==null||p.focus()})),!f&&i&&(i=!1,n("close"))}),fe({popupRef:u}),an(u,()=>e.show&&e.lockScroll),ae("popstate",()=>{e.closeOnPopstate&&(r(),a=!1)}),ue(()=>{e.show&&m()}),Fe(()=>{a&&(n("update:show",!0),a=!1)}),ce(()=>{e.show&&e.teleport&&(r(),a=!0)}),He(ze,()=>e.show),()=>e.teleport?o(Ke,{to:e.teleport},{default:()=>[y(),R()]}):o(j,null,[y(),R()])}});const ye=E(vn);let L=0;function mn(e){e?(L||document.body.classList.add("van-toast--unclickable"),L++):L&&(L--,L||document.body.classList.remove("van-toast--unclickable"))}const[yn,z]=_("toast"),gn=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],hn={icon:String,show:Boolean,type:h("text"),overlay:Boolean,message:w,iconSize:w,duration:Ee(2e3),position:h("middle"),teleport:[String,Object],wordBreak:String,className:H,iconPrefix:String,transition:h("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:H,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ge=I({name:yn,props:hn,emits:["update:show"],setup(e,{emit:n,slots:t}){let s,i=!1;const a=()=>{const r=e.show&&e.forbidClick;i!==r&&(i=r,mn(i))},l=r=>n("update:show",r),u=()=>{e.closeOnClick&&l(!1)},v=()=>clearTimeout(s),c=()=>{const{icon:r,type:d,iconSize:y,iconPrefix:C,loadingType:b}=e;if(r||d==="success"||d==="fail")return o(V,{name:r||d,size:y,class:z("icon"),classPrefix:C},null);if(d==="loading")return o(ve,{class:z("loading"),size:y,type:b},null)},m=()=>{const{type:r,message:d}=e;if(t.message)return o("div",{class:z("text")},[t.message()]);if(q(d)&&d!=="")return r==="html"?o("div",{key:0,class:z("text"),innerHTML:String(d)},null):o("div",{class:z("text")},[d])};return A(()=>[e.show,e.forbidClick],a),A(()=>[e.show,e.type,e.message,e.duration],()=>{v(),e.show&&e.duration>0&&(s=setTimeout(()=>{l(!1)},e.duration))}),ue(a),Ye(a),()=>o(ye,Z({class:[z([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:u,onClosed:v,"onUpdate:show":l},_e(e,gn)),{default:()=>[c(),m()]})}});function Cn(){const e=J({show:!1}),n=i=>{e.show=i},t=i=>{S(e,i,{transitionAppear:!0}),n(!0)},s=()=>n(!1);return fe({open:t,close:s,toggle:n}),{open:t,close:s,state:e,toggle:n}}function kn(e){const n=Re(e),t=document.createElement("div");return document.body.appendChild(t),{instance:n.mount(t),unmount(){n.unmount(),document.body.removeChild(t)}}}const wn={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let F=[],Sn=!1,ne=S({},wn);const bn=new Map;function he(e){return $e(e)?e:{message:e}}function pn(){const{instance:e,unmount:n}=kn({setup(){const t=g(""),{open:s,state:i,close:a,toggle:l}=Cn(),u=()=>{},v=()=>o(ge,Z(i,{onClosed:u,"onUpdate:show":l}),null);return A(t,c=>{i.message=c}),se().render=v,{open:s,close:a,message:t}}});return e}function On(){if(!F.length||Sn){const e=pn();F.push(e)}return F[F.length-1]}function xn(e={}){if(!Le)return{};const n=On(),t=he(e);return n.open(S({},ne,bn.get(t.type||ne.type),t)),n}const In=e=>n=>xn(S({type:e},he(n))),Bn=In("loading");E(ge);const[te,zn]=_("space"),Pn={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function Ce(e=[]){const n=[];return e.forEach(t=>{Array.isArray(t)?n.push(...t):t.type===j?n.push(...Ce(t.children)):n.push(t)}),n.filter(t=>{var s;return!(t&&(typeof Comment<"u"&&t.type===Comment||t.type===j&&((s=t.children)==null?void 0:s.length)===0||t.type===Text&&t.children.trim()===""))})}var Tn=I({name:te,props:Pn,setup(e,{slots:n}){const t=K(()=>{var a;return(a=e.align)!=null?a:e.direction==="horizontal"?"center":""}),s=a=>typeof a=="number"?a+"px":a,i=a=>{const l={},u=`${s(Array.isArray(e.size)?e.size[0]:e.size)}`,v=`${s(Array.isArray(e.size)?e.size[1]:e.size)}`;return a?e.wrap?{marginBottom:v}:{}:(e.direction==="horizontal"&&(l.marginRight=u),(e.direction==="vertical"||e.wrap)&&(l.marginBottom=v),l)};return()=>{var a;const l=Ce((a=n.default)==null?void 0:a.call(n));return o("div",{class:[zn({[e.direction]:e.direction,[`align-${t.value}`]:t.value,wrap:e.wrap,fill:e.fill})]},[l.map((u,v)=>o("div",{key:`item-${v}`,class:`${te}-item`,style:i(v===l.length-1)},[u]))])}}});const oe=E(Tn);function An(){const e=De(),n=K(()=>e.count);function t(){e.increment()}return{count:n,handleClick:t}}const _n={getInfo(){return Ne.get("/demo/info")}};function En(){const e=J({title:"-"});async function n(){const t=Bn({message:"加载中",duration:0,forbidClick:!0});try{const s=await _n.getInfo();e.title=s.title}finally{t.close()}}return Xe(()=>{n()}),{...de(e)}}function Rn(){const e=J({show:!1,popupRef:{}});function n(){e.show=!0}function t(){console.log("open popup")}return{...de(e),handleShow:n,handleOpen:t}}const $n="view__KzK0f",Ln="section__BVOox",Dn="popupContent__mbUT8",P={view:$n,section:Ln,popupContent:Dn},Un=I({name:je.INDEX.name,setup(){const e=An(),n=En(),t=Rn();return{...e,...n,...t}},render(){return o("div",{class:P.view},[o("h2",null,[this.title]),o("div",{class:P.section},[o("h3",null,[x("Store")]),o("p",null,[this.count]),o(Q,{type:"primary",onClick:this.handleClick},{default:()=>[x("点击")]})]),o("div",{class:P.section},[o("h3",null,[x("框架图标")]),o(oe,null,{default:()=>[o(O,{icon:"ant-design:account-book-filled"},null),o(O,{icon:"ant-design:aim-outlined"},null),o(O,{icon:"ant-design:alert-filled"},null)]})]),o("div",{class:P.section},[o("h3",null,[x("弹出层")]),o(Q,{type:"primary",onClick:this.handleShow},{default:()=>[x("点击")]})]),o("div",{class:P.section},[o("h3",null,[x("自定义图标")]),o(oe,null,{default:()=>[o(O,{icon:"custom:coffee"},null),o(O,{icon:"custom:chips"},null),o(O,{icon:"custom:ice-cream"},null),o(O,{icon:"custom-coke"},null),o(O,{icon:"custom-hamburg"},null)]})]),o(ye,{ref:"popupRef",show:this.show,"onUpdate:show":e=>this.show=e,position:"center",teleport:"#app",closeable:!0,onOpen:this.handleOpen},{default:()=>o("div",{class:P.popupContent},[x("哈哈")])})])}});export{Un as default};
