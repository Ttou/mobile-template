import{i as ye,u as me,e as S,g as ee,c as L,a,d as T,b as F,f as ge,n as O,m as g,h as he,w as R,r as Ce,j as be,B as ke,I as V,t as p,k as U,l as v,o as Se,p as te,q as Oe,s as z,v as Ie,x as ne,T as oe,y as we,z as q,A as ae,C as le,D as xe,E as se,F as Pe,G as pe,P as ze,H as Te,J as Be,K as _e,L as De,M as G,N as Ee,O as Ae,Q as Le,R as Re,S as $e,U as Ne,V as Me,W as Ue,X as Ke,Y as Ye,Z as je,_ as He,$ as Xe,a0 as Fe}from"./index.c7d9f49a.js";ye();const Ve=e=>e.stopPropagation();function W(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Ve(e)}me();function ie(e){const t=ee();t&&S(t.proxy,e)}const[qe,A]=L("loading"),Ge=Array(12).fill(null).map((e,t)=>a("i",{class:A("line",String(t+1))},null)),We=a("svg",{class:A("circular"),viewBox:"25 25 50 50"},[a("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ze={size:O,type:g("circular"),color:String,vertical:Boolean,textSize:O,textColor:String};var Je=T({name:qe,props:Ze,setup(e,{slots:t}){const n=F(()=>S({color:e.color},ge(e.size))),s=()=>{var o;if(t.default)return a("span",{class:A("text"),style:{fontSize:he(e.textSize),color:(o=e.textColor)!=null?o:e.color}},[t.default()])};return()=>{const{type:o,vertical:i}=e;return a("div",{class:A([o,{vertical:i}]),"aria-live":"polite","aria-busy":!0},[a("span",{class:A("spinner",o),style:n.value},[o==="spinner"?Ge:We]),s()])}}});const ce=R(Je),[Qe,P]=L("button"),et=S({},Ce,{tag:g("button"),text:String,icon:String,type:g("default"),size:g("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:g("button"),loadingSize:O,loadingText:String,loadingType:String,iconPosition:g("left")});var tt=T({name:Qe,props:et,emits:["click"],setup(e,{emit:t,slots:n}){const s=be(),o=()=>n.loading?n.loading():a(ce,{size:e.loadingSize,type:e.loadingType,class:P("loading")},null),i=()=>{if(e.loading)return o();if(n.icon)return a("div",{class:P("icon")},[n.icon()]);if(e.icon)return a(V,{name:e.icon,class:P("icon"),classPrefix:e.iconPrefix},null)},c=()=>{let l;if(e.loading?l=e.loadingText:l=n.default?n.default():e.text,l)return a("span",{class:P("text")},[l])},d=()=>{const{color:l,plain:r}=e;if(l){const u={color:r?l:"white"};return r||(u.background=l),l.includes("gradient")?u.border=0:u.borderColor=l,u}},h=l=>{e.loading?W(l):e.disabled||(t("click",l),s())};return()=>{const{tag:l,type:r,size:u,block:y,round:m,plain:C,square:x,loading:I,disabled:$,hairline:N,nativeType:H,iconPosition:B}=e,f=[P([r,u,{plain:C,block:y,round:m,square:x,loading:I,disabled:$,hairline:N}]),{[ke]:N}];return a(l,{type:H,class:f,style:d(),disabled:$,onClick:h},{default:()=>[a("div",{class:P("content")},[B==="left"&&i(),c(),B==="right"&&i()])]})}}});const nt=R(tt),ot={show:Boolean,zIndex:O,overlay:p,duration:O,teleport:[String,Object],lockScroll:p,lazyRender:p,beforeClose:Function,overlayStyle:Object,overlayClass:U,transitionAppear:Boolean,closeOnClickOverlay:p};function at(e,t){return e>t?"horizontal":t>e?"vertical":""}function lt(){const e=v(0),t=v(0),n=v(0),s=v(0),o=v(0),i=v(0),c=v(""),d=()=>c.value==="vertical",h=()=>c.value==="horizontal",l=()=>{n.value=0,s.value=0,o.value=0,i.value=0,c.value=""};return{move:y=>{const m=y.touches[0];n.value=(m.clientX<0?0:m.clientX)-e.value,s.value=m.clientY-t.value,o.value=Math.abs(n.value),i.value=Math.abs(s.value);const C=10;(!c.value||o.value<C&&i.value<C)&&(c.value=at(o.value,i.value))},start:y=>{l(),e.value=y.touches[0].clientX,t.value=y.touches[0].clientY},reset:l,startX:e,startY:t,deltaX:n,deltaY:s,offsetX:o,offsetY:i,direction:c,isVertical:d,isHorizontal:h}}let _=0;const J="van-overflow-hidden";function st(e,t){const n=lt(),s="01",o="10",i=r=>{n.move(r);const u=n.deltaY.value>0?o:s,y=Ie(r.target,e.value),{scrollHeight:m,offsetHeight:C,scrollTop:x}=y;let I="11";x===0?I=C>=m?"00":"01":x+C>=m&&(I="10"),I!=="11"&&n.isVertical()&&!(parseInt(I,2)&parseInt(u,2))&&W(r,!0)},c=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",i,{passive:!1}),_||document.body.classList.add(J),_++},d=()=>{_&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",i),_--,_||document.body.classList.remove(J))},h=()=>t()&&c(),l=()=>t()&&d();Se(h),te(l),Oe(l),z(t,r=>{r?c():d()})}function re(e){const t=v(!1);return z(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[it,ct]=L("overlay"),rt={show:Boolean,zIndex:O,duration:O,className:U,lockScroll:p,lazyRender:p,customStyle:Object};var ut=T({name:it,props:rt,setup(e,{slots:t}){const n=v(),s=re(()=>e.show||!e.lazyRender),o=c=>{e.lockScroll&&W(c,!0)},i=s(()=>{var c;const d=S(we(e.zIndex),e.customStyle);return q(e.duration)&&(d.animationDuration=`${e.duration}s`),ae(a("div",{ref:n,style:d,class:[ct(),e.className]},[(c=t.default)==null?void 0:c.call(t)]),[[le,e.show]])});return ne("touchmove",o,{target:n}),()=>a(oe,{name:"van-fade",appear:!0},{default:i})}});const dt=R(ut),ft=S({},ot,{round:Boolean,position:g("center"),closeIcon:g("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:g("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[vt,Q]=L("popup");var yt=T({name:vt,inheritAttrs:!1,props:ft,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:t,attrs:n,slots:s}){let o,i;const c=v(),d=v(),h=re(()=>e.show||!e.lazyRender),l=F(()=>{const f={zIndex:c.value};if(q(e.duration)){const w=e.position==="center"?"animationDuration":"transitionDuration";f[w]=`${e.duration}s`}return f}),r=()=>{o||(o=!0,c.value=e.zIndex!==void 0?+e.zIndex:_e(),t("open"))},u=()=>{o&&De(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},y=f=>{t("click-overlay",f),e.closeOnClickOverlay&&u()},m=()=>{if(e.overlay)return a(dt,{show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:y},{default:s["overlay-content"]})},C=f=>{t("click-close-icon",f),u()},x=()=>{if(e.closeable)return a(V,{role:"button",tabindex:0,name:e.closeIcon,class:[Q("close-icon",e.closeIconPosition),Ee],classPrefix:e.iconPrefix,onClick:C},null)},I=()=>t("opened"),$=()=>t("closed"),N=f=>t("keydown",f),H=h(()=>{var f;const{round:w,position:M,safeAreaInsetTop:X,safeAreaInsetBottom:ve}=e;return ae(a("div",G({ref:d,style:l.value,role:"dialog",tabindex:0,class:[Q({round:w,[M]:M}),{"van-safe-area-top":X,"van-safe-area-bottom":ve}],onKeydown:N},n),[(f=s.default)==null?void 0:f.call(s),x()]),[[le,e.show]])}),B=()=>{const{position:f,transition:w,transitionAppear:M}=e,X=f==="center"?"van-fade":`van-popup-slide-${f}`;return a(oe,{name:w||X,appear:M,onAfterEnter:I,onAfterLeave:$},{default:H})};return z(()=>e.show,f=>{f&&!o&&(r(),n.tabindex===0&&xe(()=>{var w;(w=d.value)==null||w.focus()})),!f&&o&&(o=!1,t("close"))}),ie({popupRef:d}),st(d,()=>e.show&&e.lockScroll),ne("popstate",()=>{e.closeOnPopstate&&(u(),i=!1)}),se(()=>{e.show&&r()}),Pe(()=>{i&&(t("update:show",!0),i=!1)}),te(()=>{e.show&&e.teleport&&(u(),i=!0)}),pe(ze,()=>e.show),()=>e.teleport?a(Te,{to:e.teleport},{default:()=>[m(),B()]}):a(Be,null,[m(),B()])}});const mt=R(yt);function gt(){const e=Le({show:!1}),t=o=>{e.show=o},n=o=>{S(e,o,{transitionAppear:!0}),t(!0)},s=()=>t(!1);return ie({open:n,close:s,toggle:t}),{open:n,close:s,state:e,toggle:t}}function ht(e){const t=Ae(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}let D=0;function Ct(e){e?(D||document.body.classList.add("van-toast--unclickable"),D++):D&&(D--,D||document.body.classList.remove("van-toast--unclickable"))}const[bt,E]=L("toast"),kt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],St={icon:String,show:Boolean,type:g("text"),overlay:Boolean,message:O,iconSize:O,duration:Ne(2e3),position:g("middle"),teleport:[String,Object],className:U,iconPrefix:String,transition:g("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:U,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ue=T({name:bt,props:St,emits:["update:show"],setup(e,{emit:t}){let n,s=!1;const o=()=>{const r=e.show&&e.forbidClick;s!==r&&(s=r,Ct(s))},i=r=>t("update:show",r),c=()=>{e.closeOnClick&&i(!1)},d=()=>clearTimeout(n),h=()=>{const{icon:r,type:u,iconSize:y,iconPrefix:m,loadingType:C}=e;if(r||u==="success"||u==="fail")return a(V,{name:r||u,size:y,class:E("icon"),classPrefix:m},null);if(u==="loading")return a(ce,{class:E("loading"),size:y,type:C},null)},l=()=>{const{type:r,message:u}=e;if(q(u)&&u!=="")return r==="html"?a("div",{key:0,class:E("text"),innerHTML:String(u)},null):a("div",{class:E("text")},[u])};return z(()=>[e.show,e.forbidClick],o),z(()=>[e.show,e.type,e.message,e.duration],()=>{d(),e.show&&e.duration>0&&(n=setTimeout(()=>{i(!1)},e.duration))}),se(o),Re(o),()=>a(mt,G({class:[E([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:d,"onUpdate:show":i},$e(e,kt)),{default:()=>[h(),l()]})}});const de={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let b=[],j=!1,K=S({},de);const Y=new Map;function fe(e){return Ue(e)?e:{message:e}}function Ot(){const{instance:e,unmount:t}=ht({setup(){const n=v(""),{open:s,state:o,close:i,toggle:c}=gt(),d=()=>{j&&(b=b.filter(l=>l!==e),t())},h=()=>a(ue,G(o,{onClosed:d,"onUpdate:show":c}),null);return z(n,l=>{o.message=l}),ee().render=h,{open:s,clear:i,message:n}}});return e}function It(){if(!b.length||j){const e=Ot();b.push(e)}return b[b.length-1]}function k(e={}){if(!Me)return{};const t=It(),n=fe(e);return t.open(S({},K,Y.get(n.type||K.type),n)),t}const Z=e=>t=>k(S({type:e},fe(t)));k.loading=Z("loading");k.success=Z("success");k.fail=Z("fail");k.clear=e=>{var t;b.length&&(e?(b.forEach(n=>{n.clear()}),b=[]):j?(t=b.shift())==null||t.clear():b[0].clear())};function wt(e,t){typeof e=="string"?Y.set(e,t):S(K,e)}k.setDefaultOptions=wt;k.resetDefaultOptions=e=>{typeof e=="string"?Y.delete(e):(K=S({},de),Y.clear())};k.allowMultiple=(e=!0)=>{j=e};k.install=e=>{e.use(R(ue)),e.config.globalProperties.$toast=k};function xt(e){const t=v({});function n(){t.value=k.loading(e)}function s(){t.value.clear()}return{start:n,clear:s}}function Pt(){const e=Ke(),t=F(()=>e.count);function n(){e.increment()}return{count:t,handleClick:n}}const pt={getInfo(){return Ye.get("/demo/info")}};function zt(){const e=v("-");async function t(){const{start:n,clear:s}=xt({message:"\u52A0\u8F7D\u4E2D",duration:0,forbidClick:!0});try{n();const o=await pt.getInfo();e.value=o.title}finally{s()}}return je(()=>{t()}),{title:e}}const Tt="view__KzK0f",Bt="customIcon__OWfO7",_t={view:Tt,customIcon:Bt},Et=T({name:He.INDEX.name,setup(){const{...e}=Pt(),{...t}=zt();return{...e,...t}},render(){return a("div",{class:_t.view},[a("h2",null,[this.title]),a("p",null,[this.count]),a(Xe,{icon:"custom:demo"},null),a(nt,{type:"primary",onClick:this.handleClick},{default:()=>[Fe("\u70B9\u51FB")]})])}});export{Et as default};
