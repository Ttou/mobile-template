var wn=Object.defineProperty;var N=Object.getOwnPropertySymbols;var on=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable;var tn=(n,t,o)=>t in n?wn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,F=(n,t)=>{for(var o in t||(t={}))on.call(t,o)&&tn(n,o,t[o]);if(N)for(var o of N(t))en.call(t,o)&&tn(n,o,t[o]);return n};var V=(n,t)=>{var o={};for(var e in n)on.call(n,e)&&t.indexOf(e)<0&&(o[e]=n[e]);if(n!=null&&N)for(var e of N(n))t.indexOf(e)<0&&en.call(n,e)&&(o[e]=n[e]);return o};import{i as Sn,u as xn,e as w,g as sn,c as A,a as r,d as O,b as G,f as zn,n as S,m as y,h as Cn,w as E,r as _n,j as On,B as In,I as Z,t as C,k as U,l as m,o as Pn,p as cn,q as Bn,s as _,v as Tn,T as un,x as Dn,y as W,z as dn,A as vn,C as An,D as En,E as Ln,F as bn,G as Rn,H as $n,J as Mn,K as Nn,L as J,M as Un,N as jn,O as Yn,P as Hn,Q as Xn,R as Kn,S as qn,U as Fn,V as Vn,W as Gn,X as Zn,Y as Wn,Z as Jn,_ as Qn}from"./index.581ad220.js";Sn();const nt=n=>n.stopPropagation();function Q(n,t){(typeof n.cancelable!="boolean"||n.cancelable)&&n.preventDefault(),t&&nt(n)}xn();function fn(n){const t=sn();t&&w(t.proxy,n)}const[tt,D]=A("loading"),ot=Array(12).fill(null).map((n,t)=>r("i",{class:D("line",String(t+1))},null)),et=r("svg",{class:D("circular"),viewBox:"25 25 50 50"},[r("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),at={size:S,type:y("circular"),color:String,vertical:Boolean,textSize:S,textColor:String};var rt=O({name:tt,props:at,setup(n,{slots:t}){const o=G(()=>w({color:n.color},zn(n.size))),e=()=>{var a;if(t.default)return r("span",{class:D("text"),style:{fontSize:Cn(n.textSize),color:(a=n.textColor)!=null?a:n.color}},[t.default()])};return()=>{const{type:a,vertical:i}=n;return r("div",{class:D([a,{vertical:i}]),"aria-live":"polite","aria-busy":!0},[r("span",{class:D("spinner",a),style:o.value},[a==="spinner"?ot:et]),e()])}}});const gn=E(rt),[it,z]=A("button"),lt=w({},_n,{tag:y("button"),text:String,icon:String,type:y("default"),size:y("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:y("button"),loadingSize:S,loadingText:String,loadingType:String,iconPosition:y("left")});var st=O({name:it,props:lt,emits:["click"],setup(n,{emit:t,slots:o}){const e=On(),a=()=>o.loading?o.loading():r(gn,{size:n.loadingSize,type:n.loadingType,class:z("loading")},null),i=()=>{if(n.loading)return a();if(o.icon)return r("div",{class:z("icon")},[o.icon()]);if(n.icon)return r(Z,{name:n.icon,class:z("icon"),classPrefix:n.iconPrefix},null)},c=()=>{let l;if(n.loading?l=n.loadingText:l=o.default?o.default():n.text,l)return r("span",{class:z("text")},[l])},v=()=>{const{color:l,plain:u}=n;if(l){const s={color:u?l:"white"};return u||(s.background=l),l.includes("gradient")?s.border=0:s.borderColor=l,s}},b=l=>{n.loading?Q(l):n.disabled||(t("click",l),e())};return()=>{const{tag:l,type:u,size:s,block:f,round:g,plain:h,square:L,loading:X,disabled:R,hairline:$,nativeType:K,iconPosition:I}=n,d=[z([u,s,{plain:h,block:f,round:g,square:L,loading:X,disabled:R,hairline:$}]),{[In]:$}];return r(l,{type:K,class:d,style:v(),disabled:R,onClick:b},{default:()=>[r("div",{class:z("content")},[I==="left"&&i(),c(),I==="right"&&i()])]})}}});const ct=E(st),ut={show:Boolean,zIndex:S,overlay:C,duration:S,teleport:[String,Object],lockScroll:C,lazyRender:C,beforeClose:Function,overlayStyle:Object,overlayClass:U,transitionAppear:Boolean,closeOnClickOverlay:C};function dt(n,t){return n>t?"horizontal":t>n?"vertical":""}function vt(){const n=m(0),t=m(0),o=m(0),e=m(0),a=m(0),i=m(0),c=m(""),v=()=>c.value==="vertical",b=()=>c.value==="horizontal",l=()=>{o.value=0,e.value=0,a.value=0,i.value=0,c.value=""};return{move:f=>{const g=f.touches[0];o.value=(g.clientX<0?0:g.clientX)-n.value,e.value=g.clientY-t.value,a.value=Math.abs(o.value),i.value=Math.abs(e.value);const h=10;(!c.value||a.value<h&&i.value<h)&&(c.value=dt(a.value,i.value))},start:f=>{l(),n.value=f.touches[0].clientX,t.value=f.touches[0].clientY},reset:l,startX:n,startY:t,deltaX:o,deltaY:e,offsetX:a,offsetY:i,direction:c,isVertical:v,isHorizontal:b}}let P=0;const an="van-overflow-hidden";function bt(n,t){const o=vt(),e=b=>{o.move(b);const l=o.deltaY.value>0?"10":"01",u=Tn(b.target,n.value),{scrollHeight:s,offsetHeight:f,scrollTop:g}=u;let h="11";g===0?h=f>=s?"00":"01":g+f>=s&&(h="10"),h!=="11"&&o.isVertical()&&!(parseInt(h,2)&parseInt(l,2))&&Q(b,!0)},a=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",e,{passive:!1}),P||document.body.classList.add(an),P++},i=()=>{P&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",e),P--,P||document.body.classList.remove(an))},c=()=>t()&&a(),v=()=>t()&&i();Pn(c),cn(v),Bn(v),_(t,b=>{b?a():i()})}function hn(n){const t=m(!1);return _(n,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const ft=Symbol(),[gt,ht]=A("overlay"),mt={show:Boolean,zIndex:S,duration:S,className:U,lockScroll:C,lazyRender:C,customStyle:Object};var yt=O({name:gt,props:mt,setup(n,{slots:t}){const o=hn(()=>n.show||!n.lazyRender),e=i=>{Q(i,!0)},a=o(()=>{var i;const c=w(Dn(n.zIndex),n.customStyle);return W(n.duration)&&(c.animationDuration=`${n.duration}s`),dn(r("div",{style:c,class:[ht(),n.className],onTouchmove:n.lockScroll?e:An},[(i=t.default)==null?void 0:i.call(t)]),[[vn,n.show]])});return()=>r(un,{name:"van-fade",appear:!0},{default:a})}});const pt=E(yt),kt=w({},ut,{round:Boolean,position:y("center"),closeIcon:y("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:y("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[wt,rn]=A("popup");let ln=2e3;var St=O({name:wt,inheritAttrs:!1,props:kt,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(n,{emit:t,attrs:o,slots:e}){let a,i;const c=m(),v=m(),b=hn(()=>n.show||!n.lazyRender),l=G(()=>{const d={zIndex:c.value};if(W(n.duration)){const x=n.position==="center"?"animationDuration":"transitionDuration";d[x]=`${n.duration}s`}return d}),u=()=>{a||(n.zIndex!==void 0&&(ln=+n.zIndex),a=!0,c.value=++ln,t("open"))},s=()=>{a&&Un(n.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},f=d=>{t("click-overlay",d),n.closeOnClickOverlay&&s()},g=()=>{if(n.overlay)return r(pt,{show:n.show,class:n.overlayClass,zIndex:c.value,duration:n.duration,customStyle:n.overlayStyle,onClick:f},{default:e["overlay-content"]})},h=d=>{t("click-close-icon",d),s()},L=()=>{if(n.closeable)return r(Z,{role:"button",tabindex:0,name:n.closeIcon,class:[rn("close-icon",n.closeIconPosition),jn],classPrefix:n.iconPrefix,onClick:h},null)},X=()=>t("opened"),R=()=>t("closed"),$=d=>t("keydown",d),K=b(()=>{var d;const{round:x,position:M,safeAreaInsetTop:q,safeAreaInsetBottom:kn}=n;return dn(r("div",J({ref:v,style:l.value,class:[rn({round:x,[M]:M}),{"van-safe-area-top":q,"van-safe-area-bottom":kn}],onKeydown:$},o),[(d=e.default)==null?void 0:d.call(e),L()]),[[vn,n.show]])}),I=()=>{const{position:d,transition:x,transitionAppear:M}=n,q=d==="center"?"van-fade":`van-popup-slide-${d}`;return r(un,{name:x||q,appear:M,onAfterEnter:X,onAfterLeave:R},{default:K})};return _(()=>n.show,d=>{d&&!a&&(u(),o.tabindex===0&&En(()=>{var x;(x=v.value)==null||x.focus()})),!d&&a&&(a=!1,t("close"))}),fn({popupRef:v}),bt(v,()=>n.show&&n.lockScroll),Ln("popstate",()=>{n.closeOnPopstate&&(s(),i=!1)}),bn(()=>{n.show&&u()}),Rn(()=>{i&&(t("update:show",!0),i=!1)}),cn(()=>{n.show&&(s(),i=!0)}),$n(ft,()=>n.show),()=>n.teleport?r(Mn,{to:n.teleport},{default:()=>[g(),I()]}):r(Nn,null,[g(),I()])}});const xt=E(St);function zt(){const n=Hn({show:!1}),t=a=>{n.show=a},o=a=>{w(n,a,{transitionAppear:!0}),t(!0)},e=()=>t(!1);return fn({open:o,close:e,toggle:t}),{open:o,close:e,state:n,toggle:t}}function Ct(n){const t=Yn(n),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}let B=0;function _t(n){n?(B||document.body.classList.add("van-toast--unclickable"),B++):B&&(B--,B||document.body.classList.remove("van-toast--unclickable"))}const[Ot,T]=A("toast"),It=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Pt={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:S,iconSize:S,duration:qn(2e3),position:y("middle"),teleport:[String,Object],className:U,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:U,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var mn=O({name:Ot,props:Pt,emits:["update:show"],setup(n,{emit:t}){let o,e=!1;const a=()=>{const u=n.show&&n.forbidClick;e!==u&&(e=u,_t(e))},i=u=>t("update:show",u),c=()=>{n.closeOnClick&&i(!1)},v=()=>clearTimeout(o),b=()=>{const{icon:u,type:s,iconSize:f,iconPrefix:g,loadingType:h}=n;if(u||s==="success"||s==="fail")return r(Z,{name:u||s,size:f,class:T("icon"),classPrefix:g},null);if(s==="loading")return r(gn,{class:T("loading"),size:f,type:h},null)},l=()=>{const{type:u,message:s}=n;if(W(s)&&s!=="")return u==="html"?r("div",{key:0,class:T("text"),innerHTML:String(s)},null):r("div",{class:T("text")},[s])};return _(()=>[n.show,n.forbidClick],a),_(()=>[n.show,n.type,n.message,n.duration],()=>{v(),n.show&&n.duration>0&&(o=setTimeout(()=>{i(!1)},n.duration))}),bn(a),Xn(a),()=>r(xt,J({class:[T([n.position,{[n.type]:!n.icon}]),n.className],lockScroll:!1,onClick:c,onClosed:v,"onUpdate:show":i},Kn(n,It)),{default:()=>[b(),l()]})}});const yn={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let p=[],H=!1,j=w({},yn);const Y=new Map;function pn(n){return Vn(n)?n:{message:n}}function Bt(){const{instance:n,unmount:t}=Ct({setup(){const o=m(""),{open:e,state:a,close:i,toggle:c}=zt(),v=()=>{H&&(p=p.filter(l=>l!==n),t())},b=()=>r(mn,J(a,{onClosed:v,"onUpdate:show":c}),null);return _(o,l=>{a.message=l}),sn().render=b,{open:e,clear:i,message:o}}});return n}function Tt(){if(!p.length||H){const n=Bt();p.push(n)}return p[p.length-1]}function k(n={}){if(!Fn)return{};const t=Tt(),o=pn(n);return t.open(w({},j,Y.get(o.type||j.type),o)),t}const nn=n=>t=>k(w({type:n},pn(t)));k.loading=nn("loading");k.success=nn("success");k.fail=nn("fail");k.clear=n=>{var t;p.length&&(n?(p.forEach(o=>{o.clear()}),p=[]):H?(t=p.shift())==null||t.clear():p[0].clear())};function Dt(n,t){typeof n=="string"?Y.set(n,t):w(j,n)}k.setDefaultOptions=Dt;k.resetDefaultOptions=n=>{typeof n=="string"?Y.delete(n):(j=w({},yn),Y.clear())};k.allowMultiple=(n=!0)=>{H=n};k.install=n=>{n.use(E(mn)),n.config.globalProperties.$toast=k};function At(n){const t=m({});function o(){t.value=k.loading(n)}function e(){t.value.clear()}return{start:o,clear:e}}function Et(){return Gn("main",{state:()=>({count:0}),actions:{add(){this.count++}}})()}function Lt(){const n=Et(),t=G(()=>n.count);function o(){n.add()}return{count:t,handleClick:o}}var Rt={getInfo(){return Zn.get("/demo/info")}};function $t(){const n=m("-");async function t(){const{start:o,clear:e}=At({message:"\u52A0\u8F7D\u4E2D",duration:0,forbidClick:!0});try{o();const a=await Rt.getInfo();n.value=a.title}finally{e()}}return Wn(()=>{t()}),{title:n}}const Mt="view__kv8mG";var Nt={view:Mt},Yt=O({name:Jn.INDEX.name,setup(){const n=V(Lt(),[]),t=V($t(),[]);return F(F({},n),t)},render(){return r("div",{class:Nt.view},[r("h2",null,[this.title]),r("p",null,[this.count]),r(ct,{type:"primary",onClick:this.handleClick},{default:()=>[Qn("\u70B9\u51FB")]})])}});export{Yt as default};
