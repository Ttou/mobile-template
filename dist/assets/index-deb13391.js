import{c as M,m as w,n as I,a as G,u as P,d as S,w as C,o as J,b as K,e as s,f as N,p as Q,P as E,I as X,L as W,i as Y,g as B,h as Z,j as ee,k as te,r as ne,l as oe,q as se,s as F,t as L,F as x,v as ae,x as ie,y as R,z as ce,A as U,C as le,B as re,D as ue,E as g,G as de,H as fe,J as f,K as z,M as y,N as A,O as me,Q as pe}from"./index-30ebb5f0.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";let h=0;function ge(e){e?(h||document.body.classList.add("van-toast--unclickable"),h++):h&&(h--,h||document.body.classList.remove("van-toast--unclickable"))}const[ye,p]=M("toast"),ve=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],_e={icon:String,show:Boolean,type:w("text"),overlay:Boolean,message:I,iconSize:I,duration:G(2e3),position:w("middle"),teleport:[String,Object],wordBreak:String,className:P,iconPrefix:String,transition:w("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:P,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var j=S({name:ye,props:_e,emits:["update:show"],setup(e,{emit:n,slots:t}){let i,r=!1;const o=()=>{const u=e.show&&e.forbidClick;r!==u&&(r=u,ge(r))},a=u=>n("update:show",u),c=()=>{e.closeOnClick&&a(!1)},l=()=>clearTimeout(i),m=()=>{const{icon:u,type:d,iconSize:O,iconPrefix:V,loadingType:q}=e;if(u||d==="success"||d==="fail")return s(X,{name:u||d,size:O,class:p("icon"),classPrefix:V},null);if(d==="loading")return s(W,{class:p("loading"),size:O,type:q},null)},k=()=>{const{type:u,message:d}=e;if(t.message)return s("div",{class:p("text")},[t.message()]);if(Y(d)&&d!=="")return u==="html"?s("div",{key:0,class:p("text"),innerHTML:String(d)},null):s("div",{class:p("text")},[d])};return C(()=>[e.show,e.forbidClick],o),C(()=>[e.show,e.type,e.message,e.duration],()=>{l(),e.show&&e.duration>0&&(i=setTimeout(()=>{a(!1)},e.duration))}),J(o),K(o),()=>s(E,N({class:[p([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:l,"onUpdate:show":a},Q(e,ve)),{default:()=>[m(),k()]})}});const ke={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let v=[],we=!1,T=B({},ke);const Ce=new Map;function H(e){return Z(e)?e:{message:e}}function Se(){const{instance:e,unmount:n}=te({setup(){const t=ne(""),{open:i,state:r,close:o,toggle:a}=oe(),c=()=>{},l=()=>s(j,N(r,{onClosed:c,"onUpdate:show":a}),null);return C(t,m=>{r.message=m}),se().render=l,{open:i,close:o,message:t}}});return e}function Be(){if(!v.length||we){const e=Se();v.push(e)}return v[v.length-1]}function be(e={}){if(!ee)return{};const n=Be(),t=H(e);return n.open(B({},T,Ce.get(t.type||T.type),t)),n}const Oe=e=>n=>be(B({type:e},H(n))),Ie=Oe("loading");F(j);const[$,Pe]=M("space"),xe={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function D(e=[]){const n=[];return e.forEach(t=>{Array.isArray(t)?n.push(...t):t.type===x?n.push(...D(t.children)):n.push(t)}),n.filter(t=>{var i;return!(t&&(typeof Comment<"u"&&t.type===Comment||t.type===x&&((i=t.children)==null?void 0:i.length)===0||t.type===Text&&t.children.trim()===""))})}var ze=S({name:$,props:xe,setup(e,{slots:n}){const t=L(()=>{var o;return(o=e.align)!=null?o:e.direction==="horizontal"?"center":""}),i=o=>typeof o=="number"?o+"px":o,r=o=>{const a={},c=`${i(Array.isArray(e.size)?e.size[0]:e.size)}`,l=`${i(Array.isArray(e.size)?e.size[1]:e.size)}`;return o?e.wrap?{marginBottom:l}:{}:(e.direction==="horizontal"&&(a.marginRight=c),(e.direction==="vertical"||e.wrap)&&(a.marginBottom=l),a)};return()=>{var o;const a=D((o=n.default)==null?void 0:o.call(n));return s("div",{class:[Pe({[e.direction]:e.direction,[`align-${t.value}`]:t.value,wrap:e.wrap,fill:e.fill})]},[a.map((c,l)=>s("div",{key:`item-${l}`,class:`${$}-item`,style:r(l===a.length-1)},[c]))])}}});const Ae=F(ze);function Te(){const e=ae(),n=L(()=>e.count);function t(){e.increment()}return{count:n,handleClick:t}}const b=ie.create({baseURL:"/api"});b.interceptors.request.use(e=>e);b.interceptors.response.use(e=>e.data,e=>{console.log(e)});const $e={getInfo(){return b.get("/demo/info")}};function Me(){const e=R({title:"-"});async function n(){const t=Ie({message:"加载中",duration:0,forbidClick:!0});try{const i=await $e.getInfo();e.title=i.title}finally{t.close()}}return ce(()=>{n()}),{...U(e)}}function Ne(){const e=R({show:!1,popupRef:{}});function n(){e.show=!0}function t(){console.log("open popup")}return{...U(e),handleShow:n,handleOpen:t}}const Ee=S({name:le.INDEX.name,components:{Icon:re,Button:ue,Popup:E,Space:Ae},setup(){const e=Te(),n=Me(),t=Ne();return{...e,...n,...t}}});const _=e=>(me("data-v-3ffd94c2"),e=e(),pe(),e),Fe={class:"page"},Le={class:"section"},Re=_(()=>f("h3",null,"Store",-1)),Ue={class:"section"},je=_(()=>f("h3",null,"弹出层",-1)),He={class:"section"},De=_(()=>f("h3",null,"自定义图标",-1)),Ve=_(()=>f("div",{class:"popup__content"},"哈哈",-1));function qe(e,n,t,i,r,o){const a=g("Button"),c=g("Icon"),l=g("Space"),m=g("Popup");return de(),fe("div",Fe,[f("h2",null,z(e.title),1),f("div",Le,[Re,f("p",null,z(e.count),1),s(a,{type:"primary",onClick:e.handleClick},{default:y(()=>[A("点击")]),_:1},8,["onClick"])]),f("div",Ue,[je,s(a,{type:"primary",onClick:e.handleShow},{default:y(()=>[A("点击")]),_:1},8,["onClick"])]),f("div",He,[De,s(l,null,{default:y(()=>[s(c,{icon:"custom:coffee"}),s(c,{icon:"custom:chips"}),s(c,{icon:"custom:ice-cream"}),s(c,{icon:"custom:coke"}),s(c,{icon:"custom:hamburg"})]),_:1})]),s(m,{ref:"popupRef",show:e.show,"onUpdate:show":n[0]||(n[0]=k=>e.show=k),class:"popup",position:"center",closeable:"",onOpen:e.handleOpen},{default:y(()=>[Ve]),_:1},8,["show","onOpen"])])}const Qe=he(Ee,[["render",qe],["__scopeId","data-v-3ffd94c2"]]);export{Qe as default};
