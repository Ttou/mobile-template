import{c as R,d as b,w as C,o as K,a as Q,b as s,m as F,p as X,P as S,e as w,n as x,f as W,u as P,I as Y,L as Z,i as ee,g as O,h as ne,j as te,k as oe,r as se,l as ae,q as ie,s as L,t as U,F as $,C as ce,T as le,v as re,x as ue,y as j,z as de,A as H,B as fe,D as me,E as z,G as g,H as pe,J as he,K as f,M as T,N as y,O as A,Q as ge,R as ye}from"./index-618358a2.js";import{_ as ve}from"./_plugin-vue_export-helper-c27b6911.js";let h=0;function _e(e){e?(h||document.body.classList.add("van-toast--unclickable"),h++):h&&(h--,h||document.body.classList.remove("van-toast--unclickable"))}const[ke,p]=R("toast"),we=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Ce={icon:String,show:Boolean,type:w("text"),overlay:Boolean,message:x,iconSize:x,duration:W(2e3),position:w("middle"),teleport:[String,Object],wordBreak:String,className:P,iconPrefix:String,transition:w("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:P,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var D=b({name:ke,props:Ce,emits:["update:show"],setup(e,{emit:t,slots:n}){let i,r=!1;const o=()=>{const u=e.show&&e.forbidClick;r!==u&&(r=u,_e(r))},a=u=>t("update:show",u),c=()=>{e.closeOnClick&&a(!1)},l=()=>clearTimeout(i),m=()=>{const{icon:u,type:d,iconSize:I,iconPrefix:G,loadingType:J}=e;if(u||d==="success"||d==="fail")return s(Y,{name:u||d,size:I,class:p("icon"),classPrefix:G},null);if(d==="loading")return s(Z,{class:p("loading"),size:I,type:J},null)},k=()=>{const{type:u,message:d}=e;if(n.message)return s("div",{class:p("text")},[n.message()]);if(ee(d)&&d!=="")return u==="html"?s("div",{key:0,class:p("text"),innerHTML:String(d)},null):s("div",{class:p("text")},[d])};return C(()=>[e.show,e.forbidClick],o),C(()=>[e.show,e.type,e.message,e.duration],()=>{l(),e.show&&e.duration>0&&(i=setTimeout(()=>{a(!1)},e.duration))}),K(o),Q(o),()=>s(S,F({class:[p([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:l,"onUpdate:show":a},X(e,we)),{default:()=>[m(),k()]})}});const Se={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let v=[],be=!1,M=O({},Se);const Oe=new Map;function V(e){return ne(e)?e:{message:e}}function Be(){const{instance:e,unmount:t}=oe({setup(){const n=se(""),{open:i,state:r,close:o,toggle:a}=ae(),c=()=>{},l=()=>s(D,F(r,{onClosed:c,"onUpdate:show":a}),null);return C(n,m=>{r.message=m}),ie().render=l,{open:i,close:o,message:n}}});return e}function Ie(){if(!v.length||be){const e=Be();v.push(e)}return v[v.length-1]}function xe(e={}){if(!te)return{};const t=Ie(),n=V(e);return t.open(O({},M,Oe.get(n.type||M.type),n)),t}const Pe=e=>t=>xe(O({type:e},V(t))),$e=Pe("loading");L(D);const[N,ze]=R("space"),Te={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function q(e=[]){const t=[];return e.forEach(n=>{Array.isArray(n)?t.push(...n):n.type===$?t.push(...q(n.children)):t.push(n)}),t.filter(n=>{var i;return!(n&&(n.type===ce||n.type===$&&((i=n.children)==null?void 0:i.length)===0||n.type===le&&n.children.trim()===""))})}var Ae=b({name:N,props:Te,setup(e,{slots:t}){const n=U(()=>{var o;return(o=e.align)!=null?o:e.direction==="horizontal"?"center":""}),i=o=>typeof o=="number"?o+"px":o,r=o=>{const a={},c=`${i(Array.isArray(e.size)?e.size[0]:e.size)}`,l=`${i(Array.isArray(e.size)?e.size[1]:e.size)}`;return o?e.wrap?{marginBottom:l}:{}:(e.direction==="horizontal"&&(a.marginRight=c),(e.direction==="vertical"||e.wrap)&&(a.marginBottom=l),a)};return()=>{var o;const a=q((o=t.default)==null?void 0:o.call(t));return s("div",{class:[ze({[e.direction]:e.direction,[`align-${n.value}`]:n.value,wrap:e.wrap,fill:e.fill})]},[a.map((c,l)=>s("div",{key:`item-${l}`,class:`${N}-item`,style:r(l===a.length-1)},[c]))])}}});const E=L(Ae);function Me(){const e=re(),t=U(()=>e.count);function n(){e.increment()}return{count:t,handleClick:n}}const B=ue.create({baseURL:"/api"});B.interceptors.request.use(e=>e);B.interceptors.response.use(e=>e.data,e=>{console.log(e)});const Ne={getInfo(){return B.get("/demo/info")}};function Ee(){const e=j({title:"-"});async function t(){const n=$e({message:"加载中",duration:0,forbidClick:!0});try{const i=await Ne.getInfo();e.title=i.title}finally{n.close()}}return de(()=>{t()}),{...H(e)}}function Re(){const e=j({show:!1,popupRef:{}});function t(){e.show=!0}function n(){console.log("open popup")}return{...H(e),handleShow:t,handleOpen:n}}const Fe=b({name:fe.INDEX.name,components:{Icon:me,[z.name]:z,[S.name]:S,[E.name]:E},setup(){const e=Me(),t=Ee(),n=Re();return{...e,...t,...n}}});const _=e=>(ge("data-v-a9204640"),e=e(),ye(),e),Le={class:"page"},Ue={class:"section"},je=_(()=>f("h3",null,"Store",-1)),He={class:"section"},De=_(()=>f("h3",null,"弹出层",-1)),Ve={class:"section"},qe=_(()=>f("h3",null,"自定义图标",-1)),Ge=_(()=>f("div",{class:"popup__content"},"哈哈",-1));function Je(e,t,n,i,r,o){const a=g("van-button"),c=g("Icon"),l=g("van-space"),m=g("van-popup");return pe(),he("div",Le,[f("h2",null,T(e.title),1),f("div",Ue,[je,f("p",null,T(e.count),1),s(a,{type:"primary",onClick:e.handleClick},{default:y(()=>[A("点击")]),_:1},8,["onClick"])]),f("div",He,[De,s(a,{type:"primary",onClick:e.handleShow},{default:y(()=>[A("点击")]),_:1},8,["onClick"])]),f("div",Ve,[qe,s(l,null,{default:y(()=>[s(c,{icon:"custom:coffee"}),s(c,{icon:"custom:chips"}),s(c,{icon:"custom:ice-cream"}),s(c,{icon:"custom:coke"}),s(c,{icon:"custom:hamburg"})]),_:1})]),s(m,{ref:"popupRef",show:e.show,"onUpdate:show":t[0]||(t[0]=k=>e.show=k),class:"popup",position:"center",closeable:"",onOpen:e.handleOpen},{default:y(()=>[Ge]),_:1},8,["show","onOpen"])])}const We=ve(Fe,[["render",Je],["__scopeId","data-v-a9204640"]]);export{We as default};
