import{i as ye,u as me,e as C,g as te,c as A,a as l,d as P,b as F,f as ge,n as w,m as S,h as he,w as E,r as Se,j as be,B as ke,I as V,t as I,k as N,l as h,o as Ce,p as ne,q as we,s as p,v as xe,T as oe,x as Oe,y as q,z as ae,A as le,C as Ie,D as pe,E as Pe,F as se,G as ze,H as Be,J as Te,K as De,L as _e,M as G,N as Ae,O as Ee,P as Le,Q as Re,R as Me,S as $e,U as Ne,V as Ue,W as Ke,X as Ye,Y as je,Z as He,_ as Xe}from"./index.c9a95ef1.js";ye();const Fe=e=>e.stopPropagation();function Z(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Fe(e)}me();function ie(e){const t=te();t&&C(t.proxy,e)}const[Ve,_]=A("loading"),qe=Array(12).fill(null).map((e,t)=>l("i",{class:_("line",String(t+1))},null)),Ge=l("svg",{class:_("circular"),viewBox:"25 25 50 50"},[l("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ze={size:w,type:S("circular"),color:String,vertical:Boolean,textSize:w,textColor:String};var We=P({name:Ve,props:Ze,setup(e,{slots:t}){const n=F(()=>C({color:e.color},ge(e.size))),a=()=>{var o;if(t.default)return l("span",{class:_("text"),style:{fontSize:he(e.textSize),color:(o=e.textColor)!=null?o:e.color}},[t.default()])};return()=>{const{type:o,vertical:s}=e;return l("div",{class:_([o,{vertical:s}]),"aria-live":"polite","aria-busy":!0},[l("span",{class:_("spinner",o),style:n.value},[o==="spinner"?qe:Ge]),a()])}}});const ce=E(We),[Je,O]=A("button"),Qe=C({},Se,{tag:S("button"),text:String,icon:String,type:S("default"),size:S("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:S("button"),loadingSize:w,loadingText:String,loadingType:String,iconPosition:S("left")});var et=P({name:Je,props:Qe,emits:["click"],setup(e,{emit:t,slots:n}){const a=be(),o=()=>n.loading?n.loading():l(ce,{size:e.loadingSize,type:e.loadingType,class:O("loading")},null),s=()=>{if(e.loading)return o();if(n.icon)return l("div",{class:O("icon")},[n.icon()]);if(e.icon)return l(V,{name:e.icon,class:O("icon"),classPrefix:e.iconPrefix},null)},r=()=>{let i;if(e.loading?i=e.loadingText:i=n.default?n.default():e.text,i)return l("span",{class:O("text")},[i])},f=()=>{const{color:i,plain:u}=e;if(i){const c={color:u?i:"white"};return u||(c.background=i),i.includes("gradient")?c.border=0:c.borderColor=i,c}},v=i=>{e.loading?Z(i):e.disabled||(t("click",i),a())};return()=>{const{tag:i,type:u,size:c,block:y,round:m,plain:g,square:L,loading:j,disabled:R,hairline:M,nativeType:H,iconPosition:z}=e,d=[O([u,c,{plain:g,block:y,round:m,square:L,loading:j,disabled:R,hairline:M}]),{[ke]:M}];return l(i,{type:H,class:d,style:f(),disabled:R,onClick:v},{default:()=>[l("div",{class:O("content")},[z==="left"&&s(),r(),z==="right"&&s()])]})}}});const tt=E(et),nt={show:Boolean,zIndex:w,overlay:I,duration:w,teleport:[String,Object],lockScroll:I,lazyRender:I,beforeClose:Function,overlayStyle:Object,overlayClass:N,transitionAppear:Boolean,closeOnClickOverlay:I};function ot(e,t){return e>t?"horizontal":t>e?"vertical":""}function at(){const e=h(0),t=h(0),n=h(0),a=h(0),o=h(0),s=h(0),r=h(""),f=()=>r.value==="vertical",v=()=>r.value==="horizontal",i=()=>{n.value=0,a.value=0,o.value=0,s.value=0,r.value=""};return{move:y=>{const m=y.touches[0];n.value=(m.clientX<0?0:m.clientX)-e.value,a.value=m.clientY-t.value,o.value=Math.abs(n.value),s.value=Math.abs(a.value);const g=10;(!r.value||o.value<g&&s.value<g)&&(r.value=ot(o.value,s.value))},start:y=>{i(),e.value=y.touches[0].clientX,t.value=y.touches[0].clientY},reset:i,startX:e,startY:t,deltaX:n,deltaY:a,offsetX:o,offsetY:s,direction:r,isVertical:f,isHorizontal:v}}let B=0;const J="van-overflow-hidden";function lt(e,t){const n=at(),a=v=>{n.move(v);const i=n.deltaY.value>0?"10":"01",u=xe(v.target,e.value),{scrollHeight:c,offsetHeight:y,scrollTop:m}=u;let g="11";m===0?g=y>=c?"00":"01":m+y>=c&&(g="10"),g!=="11"&&n.isVertical()&&!(parseInt(g,2)&parseInt(i,2))&&Z(v,!0)},o=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",a,{passive:!1}),B||document.body.classList.add(J),B++},s=()=>{B&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",a),B--,B||document.body.classList.remove(J))},r=()=>t()&&o(),f=()=>t()&&s();Ce(r),ne(f),we(f),p(t,v=>{v?o():s()})}function re(e){const t=h(!1);return p(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const st=Symbol(),[it,ct]=A("overlay"),rt={show:Boolean,zIndex:w,duration:w,className:N,lockScroll:I,lazyRender:I,customStyle:Object};var ut=P({name:it,props:rt,setup(e,{slots:t}){const n=re(()=>e.show||!e.lazyRender),a=s=>{Z(s,!0)},o=n(()=>{var s;const r=C(Oe(e.zIndex),e.customStyle);return q(e.duration)&&(r.animationDuration=`${e.duration}s`),ae(l("div",{style:r,class:[ct(),e.className],onTouchmove:e.lockScroll?a:Ie},[(s=t.default)==null?void 0:s.call(t)]),[[le,e.show]])});return()=>l(oe,{name:"van-fade",appear:!0},{default:o})}});const dt=E(ut),ft=C({},nt,{round:Boolean,position:S("center"),closeIcon:S("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:S("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[vt,Q]=A("popup");let ee=2e3;var yt=P({name:vt,inheritAttrs:!1,props:ft,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:t,attrs:n,slots:a}){let o,s;const r=h(),f=h(),v=re(()=>e.show||!e.lazyRender),i=F(()=>{const d={zIndex:r.value};if(q(e.duration)){const x=e.position==="center"?"animationDuration":"transitionDuration";d[x]=`${e.duration}s`}return d}),u=()=>{o||(e.zIndex!==void 0&&(ee=+e.zIndex),o=!0,r.value=++ee,t("open"))},c=()=>{o&&_e(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},y=d=>{t("click-overlay",d),e.closeOnClickOverlay&&c()},m=()=>{if(e.overlay)return l(dt,{show:e.show,class:e.overlayClass,zIndex:r.value,duration:e.duration,customStyle:e.overlayStyle,onClick:y},{default:a["overlay-content"]})},g=d=>{t("click-close-icon",d),c()},L=()=>{if(e.closeable)return l(V,{role:"button",tabindex:0,name:e.closeIcon,class:[Q("close-icon",e.closeIconPosition),Ae],classPrefix:e.iconPrefix,onClick:g},null)},j=()=>t("opened"),R=()=>t("closed"),M=d=>t("keydown",d),H=v(()=>{var d;const{round:x,position:$,safeAreaInsetTop:X,safeAreaInsetBottom:ve}=e;return ae(l("div",G({ref:f,style:i.value,class:[Q({round:x,[$]:$}),{"van-safe-area-top":X,"van-safe-area-bottom":ve}],onKeydown:M},n),[(d=a.default)==null?void 0:d.call(a),L()]),[[le,e.show]])}),z=()=>{const{position:d,transition:x,transitionAppear:$}=e,X=d==="center"?"van-fade":`van-popup-slide-${d}`;return l(oe,{name:x||X,appear:$,onAfterEnter:j,onAfterLeave:R},{default:H})};return p(()=>e.show,d=>{d&&!o&&(u(),n.tabindex===0&&pe(()=>{var x;(x=f.value)==null||x.focus()})),!d&&o&&(o=!1,t("close"))}),ie({popupRef:f}),lt(f,()=>e.show&&e.lockScroll),Pe("popstate",()=>{e.closeOnPopstate&&(c(),s=!1)}),se(()=>{e.show&&u()}),ze(()=>{s&&(t("update:show",!0),s=!1)}),ne(()=>{e.show&&e.teleport&&(c(),s=!0)}),Be(st,()=>e.show),()=>e.teleport?l(Te,{to:e.teleport},{default:()=>[m(),z()]}):l(De,null,[m(),z()])}});const mt=E(yt);function gt(){const e=Le({show:!1}),t=o=>{e.show=o},n=o=>{C(e,o,{transitionAppear:!0}),t(!0)},a=()=>t(!1);return ie({open:n,close:a,toggle:t}),{open:n,close:a,state:e,toggle:t}}function ht(e){const t=Ee(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}let T=0;function St(e){e?(T||document.body.classList.add("van-toast--unclickable"),T++):T&&(T--,T||document.body.classList.remove("van-toast--unclickable"))}const[bt,D]=A("toast"),kt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Ct={icon:String,show:Boolean,type:S("text"),overlay:Boolean,message:w,iconSize:w,duration:$e(2e3),position:S("middle"),teleport:[String,Object],className:N,iconPrefix:String,transition:S("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:N,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ue=P({name:bt,props:Ct,emits:["update:show"],setup(e,{emit:t}){let n,a=!1;const o=()=>{const u=e.show&&e.forbidClick;a!==u&&(a=u,St(a))},s=u=>t("update:show",u),r=()=>{e.closeOnClick&&s(!1)},f=()=>clearTimeout(n),v=()=>{const{icon:u,type:c,iconSize:y,iconPrefix:m,loadingType:g}=e;if(u||c==="success"||c==="fail")return l(V,{name:u||c,size:y,class:D("icon"),classPrefix:m},null);if(c==="loading")return l(ce,{class:D("loading"),size:y,type:g},null)},i=()=>{const{type:u,message:c}=e;if(q(c)&&c!=="")return u==="html"?l("div",{key:0,class:D("text"),innerHTML:String(c)},null):l("div",{class:D("text")},[c])};return p(()=>[e.show,e.forbidClick],o),p(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(n=setTimeout(()=>{s(!1)},e.duration))}),se(o),Re(o),()=>l(mt,G({class:[D([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:r,onClosed:f,"onUpdate:show":s},Me(e,kt)),{default:()=>[v(),i()]})}});const de={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let b=[],Y=!1,U=C({},de);const K=new Map;function fe(e){return Ue(e)?e:{message:e}}function wt(){const{instance:e,unmount:t}=ht({setup(){const n=h(""),{open:a,state:o,close:s,toggle:r}=gt(),f=()=>{Y&&(b=b.filter(i=>i!==e),t())},v=()=>l(ue,G(o,{onClosed:f,"onUpdate:show":r}),null);return p(n,i=>{o.message=i}),te().render=v,{open:a,clear:s,message:n}}});return e}function xt(){if(!b.length||Y){const e=wt();b.push(e)}return b[b.length-1]}function k(e={}){if(!Ne)return{};const t=xt(),n=fe(e);return t.open(C({},U,K.get(n.type||U.type),n)),t}const W=e=>t=>k(C({type:e},fe(t)));k.loading=W("loading");k.success=W("success");k.fail=W("fail");k.clear=e=>{var t;b.length&&(e?(b.forEach(n=>{n.clear()}),b=[]):Y?(t=b.shift())==null||t.clear():b[0].clear())};function Ot(e,t){typeof e=="string"?K.set(e,t):C(U,e)}k.setDefaultOptions=Ot;k.resetDefaultOptions=e=>{typeof e=="string"?K.delete(e):(U=C({},de),K.clear())};k.allowMultiple=(e=!0)=>{Y=e};k.install=e=>{e.use(E(ue)),e.config.globalProperties.$toast=k};function It(e){const t=h({});function n(){t.value=k.loading(e)}function a(){t.value.clear()}return{start:n,clear:a}}function pt(){return Ke("main",{state:()=>({count:0}),actions:{add(){this.count++}}})()}function Pt(){const e=pt(),t=F(()=>e.count);function n(){e.add()}return{count:t,handleClick:n}}var zt={getInfo(){return Ye.get("/demo/info")}};function Bt(){const e=h("-");async function t(){const{start:n,clear:a}=It({message:"\u52A0\u8F7D\u4E2D",duration:0,forbidClick:!0});try{n();const o=await zt.getInfo();e.value=o.title}finally{a()}}return je(()=>{t()}),{title:e}}const Tt="view__KzK0f";var Dt={view:Tt},At=P({name:He.INDEX.name,setup(){const{...e}=Pt(),{...t}=Bt();return{...e,...t}},render(){return l("div",{class:Dt.view},[l("h2",null,[this.title]),l("p",null,[this.count]),l(tt,{type:"primary",onClick:this.handleClick},{default:()=>[Xe("\u70B9\u51FB")]})])}});export{At as default};
