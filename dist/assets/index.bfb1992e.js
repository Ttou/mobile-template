import{i as ye,u as me,e as k,g as ne,c as D,a as s,d as P,b as V,f as ge,n as w,m as S,h as he,w as L,r as Se,j as be,B as Ce,I as F,t as p,k as N,l as h,o as ke,p as oe,q as we,s as I,v as xe,T as ae,x as Oe,y as q,z as le,A as se,C as pe,D as Ie,E as Pe,F as G,G as ze,H as Te,J as Be,K as _e,L as Z,M as Ae,N as De,O as Le,P as Ee,Q as Re,R as $e,S as Me,U as Ne,V as Ue,W as Ke,X as Ye,Y as je,Z as Xe}from"./index.4c4df6a6.js";ye();const He=e=>e.stopPropagation();function W(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&He(e)}me();function ie(e){const t=ne();t&&k(t.proxy,e)}const[Ve,A]=D("loading"),Fe=Array(12).fill(null).map((e,t)=>s("i",{class:A("line",String(t+1))},null)),qe=s("svg",{class:A("circular"),viewBox:"25 25 50 50"},[s("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ge={size:w,type:S("circular"),color:String,vertical:Boolean,textSize:w,textColor:String};var Ze=P({name:Ve,props:Ge,setup(e,{slots:t}){const n=V(()=>k({color:e.color},ge(e.size))),l=()=>{var o;if(t.default)return s("span",{class:A("text"),style:{fontSize:he(e.textSize),color:(o=e.textColor)!=null?o:e.color}},[t.default()])};return()=>{const{type:o,vertical:a}=e;return s("div",{class:A([o,{vertical:a}]),"aria-live":"polite","aria-busy":!0},[s("span",{class:A("spinner",o),style:n.value},[o==="spinner"?Fe:qe]),l()])}}});const ce=L(Ze),[We,O]=D("button"),Je=k({},Se,{tag:S("button"),text:String,icon:String,type:S("default"),size:S("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:S("button"),loadingSize:w,loadingText:String,loadingType:String,iconPosition:S("left")});var Qe=P({name:We,props:Je,emits:["click"],setup(e,{emit:t,slots:n}){const l=be(),o=()=>n.loading?n.loading():s(ce,{size:e.loadingSize,type:e.loadingType,class:O("loading")},null),a=()=>{if(e.loading)return o();if(n.icon)return s("div",{class:O("icon")},[n.icon()]);if(e.icon)return s(F,{name:e.icon,class:O("icon"),classPrefix:e.iconPrefix},null)},r=()=>{let i;if(e.loading?i=e.loadingText:i=n.default?n.default():e.text,i)return s("span",{class:O("text")},[i])},f=()=>{const{color:i,plain:u}=e;if(i){const c={color:u?i:"white"};return u||(c.background=i),i.includes("gradient")?c.border=0:c.borderColor=i,c}},v=i=>{e.loading?W(i):e.disabled||(t("click",i),l())};return()=>{const{tag:i,type:u,size:c,block:y,round:m,plain:g,square:E,loading:j,disabled:R,hairline:$,nativeType:X,iconPosition:z}=e,d=[O([u,c,{plain:g,block:y,round:m,square:E,loading:j,disabled:R,hairline:$}]),{[Ce]:$}];return s(i,{type:X,class:d,style:f(),disabled:R,onClick:v},{default:()=>[s("div",{class:O("content")},[z==="left"&&a(),r(),z==="right"&&a()])]})}}});const et=L(Qe),tt={show:Boolean,zIndex:w,overlay:p,duration:w,teleport:[String,Object],lockScroll:p,lazyRender:p,beforeClose:Function,overlayStyle:Object,overlayClass:N,transitionAppear:Boolean,closeOnClickOverlay:p};function nt(e,t){return e>t?"horizontal":t>e?"vertical":""}function ot(){const e=h(0),t=h(0),n=h(0),l=h(0),o=h(0),a=h(0),r=h(""),f=()=>r.value==="vertical",v=()=>r.value==="horizontal",i=()=>{n.value=0,l.value=0,o.value=0,a.value=0,r.value=""};return{move:y=>{const m=y.touches[0];n.value=(m.clientX<0?0:m.clientX)-e.value,l.value=m.clientY-t.value,o.value=Math.abs(n.value),a.value=Math.abs(l.value);const g=10;(!r.value||o.value<g&&a.value<g)&&(r.value=nt(o.value,a.value))},start:y=>{i(),e.value=y.touches[0].clientX,t.value=y.touches[0].clientY},reset:i,startX:e,startY:t,deltaX:n,deltaY:l,offsetX:o,offsetY:a,direction:r,isVertical:f,isHorizontal:v}}let T=0;const Q="van-overflow-hidden";function at(e,t){const n=ot(),l=v=>{n.move(v);const i=n.deltaY.value>0?"10":"01",u=xe(v.target,e.value),{scrollHeight:c,offsetHeight:y,scrollTop:m}=u;let g="11";m===0?g=y>=c?"00":"01":m+y>=c&&(g="10"),g!=="11"&&n.isVertical()&&!(parseInt(g,2)&parseInt(i,2))&&W(v,!0)},o=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",l,{passive:!1}),T||document.body.classList.add(Q),T++},a=()=>{T&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",l),T--,T||document.body.classList.remove(Q))},r=()=>t()&&o(),f=()=>t()&&a();ke(r),oe(f),we(f),I(t,v=>{v?o():a()})}function re(e){const t=h(!1);return I(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const lt=Symbol(),[st,it]=D("overlay"),ct={show:Boolean,zIndex:w,duration:w,className:N,lockScroll:p,lazyRender:p,customStyle:Object};var rt=P({name:st,props:ct,setup(e,{slots:t}){const n=re(()=>e.show||!e.lazyRender),l=a=>{W(a,!0)},o=n(()=>{var a;const r=k(Oe(e.zIndex),e.customStyle);return q(e.duration)&&(r.animationDuration=`${e.duration}s`),le(s("div",{style:r,class:[it(),e.className],onTouchmove:e.lockScroll?l:pe},[(a=t.default)==null?void 0:a.call(t)]),[[se,e.show]])});return()=>s(ae,{name:"van-fade",appear:!0},{default:o})}});const ut=L(rt),dt=k({},tt,{round:Boolean,position:S("center"),closeIcon:S("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:S("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ft,ee]=D("popup");let te=2e3;var vt=P({name:ft,inheritAttrs:!1,props:dt,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:t,attrs:n,slots:l}){let o,a;const r=h(),f=h(),v=re(()=>e.show||!e.lazyRender),i=V(()=>{const d={zIndex:r.value};if(q(e.duration)){const x=e.position==="center"?"animationDuration":"transitionDuration";d[x]=`${e.duration}s`}return d}),u=()=>{o||(e.zIndex!==void 0&&(te=+e.zIndex),o=!0,r.value=++te,t("open"))},c=()=>{o&&De(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},y=d=>{t("click-overlay",d),e.closeOnClickOverlay&&c()},m=()=>{if(e.overlay)return s(ut,{show:e.show,class:e.overlayClass,zIndex:r.value,duration:e.duration,customStyle:e.overlayStyle,onClick:y},{default:l["overlay-content"]})},g=d=>{t("click-close-icon",d),c()},E=()=>{if(e.closeable)return s(F,{role:"button",tabindex:0,name:e.closeIcon,class:[ee("close-icon",e.closeIconPosition),Ae],classPrefix:e.iconPrefix,onClick:g},null)},j=()=>t("opened"),R=()=>t("closed"),$=d=>t("keydown",d),X=v(()=>{var d;const{round:x,position:M,safeAreaInsetTop:H,safeAreaInsetBottom:ve}=e;return le(s("div",Z({ref:f,style:i.value,class:[ee({round:x,[M]:M}),{"van-safe-area-top":H,"van-safe-area-bottom":ve}],onKeydown:$},n),[(d=l.default)==null?void 0:d.call(l),E()]),[[se,e.show]])}),z=()=>{const{position:d,transition:x,transitionAppear:M}=e,H=d==="center"?"van-fade":`van-popup-slide-${d}`;return s(ae,{name:x||H,appear:M,onAfterEnter:j,onAfterLeave:R},{default:X})};return I(()=>e.show,d=>{d&&!o&&(u(),n.tabindex===0&&Ie(()=>{var x;(x=f.value)==null||x.focus()})),!d&&o&&(o=!1,t("close"))}),ie({popupRef:f}),at(f,()=>e.show&&e.lockScroll),Pe("popstate",()=>{e.closeOnPopstate&&(c(),a=!1)}),G(()=>{e.show&&u()}),ze(()=>{a&&(t("update:show",!0),a=!1)}),oe(()=>{e.show&&(c(),a=!0)}),Te(lt,()=>e.show),()=>e.teleport?s(Be,{to:e.teleport},{default:()=>[m(),z()]}):s(_e,null,[m(),z()])}});const yt=L(vt);function mt(){const e=Ee({show:!1}),t=o=>{e.show=o},n=o=>{k(e,o,{transitionAppear:!0}),t(!0)},l=()=>t(!1);return ie({open:n,close:l,toggle:t}),{open:n,close:l,state:e,toggle:t}}function gt(e){const t=Le(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}let B=0;function ht(e){e?(B||document.body.classList.add("van-toast--unclickable"),B++):B&&(B--,B||document.body.classList.remove("van-toast--unclickable"))}const[St,_]=D("toast"),bt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Ct={icon:String,show:Boolean,type:S("text"),overlay:Boolean,message:w,iconSize:w,duration:Me(2e3),position:S("middle"),teleport:[String,Object],className:N,iconPrefix:String,transition:S("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:N,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ue=P({name:St,props:Ct,emits:["update:show"],setup(e,{emit:t}){let n,l=!1;const o=()=>{const u=e.show&&e.forbidClick;l!==u&&(l=u,ht(l))},a=u=>t("update:show",u),r=()=>{e.closeOnClick&&a(!1)},f=()=>clearTimeout(n),v=()=>{const{icon:u,type:c,iconSize:y,iconPrefix:m,loadingType:g}=e;if(u||c==="success"||c==="fail")return s(F,{name:u||c,size:y,class:_("icon"),classPrefix:m},null);if(c==="loading")return s(ce,{class:_("loading"),size:y,type:g},null)},i=()=>{const{type:u,message:c}=e;if(q(c)&&c!=="")return u==="html"?s("div",{key:0,class:_("text"),innerHTML:String(c)},null):s("div",{class:_("text")},[c])};return I(()=>[e.show,e.forbidClick],o),I(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(n=setTimeout(()=>{a(!1)},e.duration))}),G(o),Re(o),()=>s(yt,Z({class:[_([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:r,onClosed:f,"onUpdate:show":a},$e(e,bt)),{default:()=>[v(),i()]})}});const de={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let b=[],Y=!1,U=k({},de);const K=new Map;function fe(e){return Ue(e)?e:{message:e}}function kt(){const{instance:e,unmount:t}=gt({setup(){const n=h(""),{open:l,state:o,close:a,toggle:r}=mt(),f=()=>{Y&&(b=b.filter(i=>i!==e),t())},v=()=>s(ue,Z(o,{onClosed:f,"onUpdate:show":r}),null);return I(n,i=>{o.message=i}),ne().render=v,{open:l,clear:a,message:n}}});return e}function wt(){if(!b.length||Y){const e=kt();b.push(e)}return b[b.length-1]}function C(e={}){if(!Ne)return{};const t=wt(),n=fe(e);return t.open(k({},U,K.get(n.type||U.type),n)),t}const J=e=>t=>C(k({type:e},fe(t)));C.loading=J("loading");C.success=J("success");C.fail=J("fail");C.clear=e=>{var t;b.length&&(e?(b.forEach(n=>{n.clear()}),b=[]):Y?(t=b.shift())==null||t.clear():b[0].clear())};function xt(e,t){typeof e=="string"?K.set(e,t):k(U,e)}C.setDefaultOptions=xt;C.resetDefaultOptions=e=>{typeof e=="string"?K.delete(e):(U=k({},de),K.clear())};C.allowMultiple=(e=!0)=>{Y=e};C.install=e=>{e.use(L(ue)),e.config.globalProperties.$toast=C};function Ot(e){const t=h({});function n(){t.value=C.loading(e)}function l(){t.value.clear()}return{start:n,clear:l}}var pt={getInfo(){return Ke.get("/demo/info")}};function It(){return Ye("main",{state:()=>({count:0}),actions:{add(){this.count++}}})()}const Pt="view__KzK0f";var zt={view:Pt},Bt=P({name:je.INDEX.name,setup(){const e=h("-"),t=It(),n=V(()=>t.count);async function l(){const{start:a,clear:r}=Ot({message:"\u52A0\u8F7D\u4E2D",duration:0,forbidClick:!0});try{a();const f=await pt.getInfo();e.value=f.title}finally{r()}}function o(){t.add()}return G(()=>{l()}),{title:e,count:n,handleClick:o}},render(){return s("div",{class:zt.view},[s("h2",null,[this.title]),s("p",null,[this.count]),s(et,{type:"primary",onClick:this.handleClick},{default:()=>[Xe("\u70B9\u51FB")]})])}});export{Bt as default};
