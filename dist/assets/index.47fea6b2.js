import{i as ye,u as me,e as S,g as ee,c as L,a as l,d as T,b as F,f as ge,n as O,m as g,h as he,w as R,r as Ce,j as be,B as ke,I as V,t as p,k as U,l as v,o as Se,p as te,q as Oe,s as z,v as we,x as ne,T as oe,y as xe,z as q,A as ae,C as le,D as Ie,E as se,F as Pe,G as pe,P as ze,H as Te,J as Be,K as De,L as _e,M as G,N as Ee,O as Ae,Q as Le,R as Re,S as Ne,U as $e,V as Me,W as Ue,X as Ke,Y as Ye,Z as je,_ as He,$ as Xe}from"./index.4ae96d8c.js";ye();const Fe=e=>e.stopPropagation();function W(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Fe(e)}me();function ie(e){const t=ee();t&&S(t.proxy,e)}const[Ve,A]=L("loading"),qe=Array(12).fill(null).map((e,t)=>l("i",{class:A("line",String(t+1))},null)),Ge=l("svg",{class:A("circular"),viewBox:"25 25 50 50"},[l("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),We={size:O,type:g("circular"),color:String,vertical:Boolean,textSize:O,textColor:String};var Ze=T({name:Ve,props:We,setup(e,{slots:t}){const n=F(()=>S({color:e.color},ge(e.size))),s=()=>{var o;if(t.default)return l("span",{class:A("text"),style:{fontSize:he(e.textSize),color:(o=e.textColor)!=null?o:e.color}},[t.default()])};return()=>{const{type:o,vertical:i}=e;return l("div",{class:A([o,{vertical:i}]),"aria-live":"polite","aria-busy":!0},[l("span",{class:A("spinner",o),style:n.value},[o==="spinner"?qe:Ge]),s()])}}});const ce=R(Ze),[Je,P]=L("button"),Qe=S({},Ce,{tag:g("button"),text:String,icon:String,type:g("default"),size:g("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:g("button"),loadingSize:O,loadingText:String,loadingType:String,iconPosition:g("left")});var et=T({name:Je,props:Qe,emits:["click"],setup(e,{emit:t,slots:n}){const s=be(),o=()=>n.loading?n.loading():l(ce,{size:e.loadingSize,type:e.loadingType,class:P("loading")},null),i=()=>{if(e.loading)return o();if(n.icon)return l("div",{class:P("icon")},[n.icon()]);if(e.icon)return l(V,{name:e.icon,class:P("icon"),classPrefix:e.iconPrefix},null)},c=()=>{let a;if(e.loading?a=e.loadingText:a=n.default?n.default():e.text,a)return l("span",{class:P("text")},[a])},d=()=>{const{color:a,plain:r}=e;if(a){const u={color:r?a:"white"};return r||(u.background=a),a.includes("gradient")?u.border=0:u.borderColor=a,u}},h=a=>{e.loading?W(a):e.disabled||(t("click",a),s())};return()=>{const{tag:a,type:r,size:u,block:y,round:m,plain:C,square:I,loading:w,disabled:N,hairline:$,nativeType:H,iconPosition:B}=e,f=[P([r,u,{plain:C,block:y,round:m,square:I,loading:w,disabled:N,hairline:$}]),{[ke]:$}];return l(a,{type:H,class:f,style:d(),disabled:N,onClick:h},{default:()=>[l("div",{class:P("content")},[B==="left"&&i(),c(),B==="right"&&i()])]})}}});const tt=R(et),nt={show:Boolean,zIndex:O,overlay:p,duration:O,teleport:[String,Object],lockScroll:p,lazyRender:p,beforeClose:Function,overlayStyle:Object,overlayClass:U,transitionAppear:Boolean,closeOnClickOverlay:p};function ot(e,t){return e>t?"horizontal":t>e?"vertical":""}function at(){const e=v(0),t=v(0),n=v(0),s=v(0),o=v(0),i=v(0),c=v(""),d=()=>c.value==="vertical",h=()=>c.value==="horizontal",a=()=>{n.value=0,s.value=0,o.value=0,i.value=0,c.value=""};return{move:y=>{const m=y.touches[0];n.value=(m.clientX<0?0:m.clientX)-e.value,s.value=m.clientY-t.value,o.value=Math.abs(n.value),i.value=Math.abs(s.value);const C=10;(!c.value||o.value<C&&i.value<C)&&(c.value=ot(o.value,i.value))},start:y=>{a(),e.value=y.touches[0].clientX,t.value=y.touches[0].clientY},reset:a,startX:e,startY:t,deltaX:n,deltaY:s,offsetX:o,offsetY:i,direction:c,isVertical:d,isHorizontal:h}}let D=0;const J="van-overflow-hidden";function lt(e,t){const n=at(),s="01",o="10",i=r=>{n.move(r);const u=n.deltaY.value>0?o:s,y=we(r.target,e.value),{scrollHeight:m,offsetHeight:C,scrollTop:I}=y;let w="11";I===0?w=C>=m?"00":"01":I+C>=m&&(w="10"),w!=="11"&&n.isVertical()&&!(parseInt(w,2)&parseInt(u,2))&&W(r,!0)},c=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",i,{passive:!1}),D||document.body.classList.add(J),D++},d=()=>{D&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",i),D--,D||document.body.classList.remove(J))},h=()=>t()&&c(),a=()=>t()&&d();Se(h),te(a),Oe(a),z(t,r=>{r?c():d()})}function re(e){const t=v(!1);return z(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[st,it]=L("overlay"),ct={show:Boolean,zIndex:O,duration:O,className:U,lockScroll:p,lazyRender:p,customStyle:Object};var rt=T({name:st,props:ct,setup(e,{slots:t}){const n=v(),s=re(()=>e.show||!e.lazyRender),o=c=>{e.lockScroll&&W(c,!0)},i=s(()=>{var c;const d=S(xe(e.zIndex),e.customStyle);return q(e.duration)&&(d.animationDuration=`${e.duration}s`),ae(l("div",{ref:n,style:d,class:[it(),e.className]},[(c=t.default)==null?void 0:c.call(t)]),[[le,e.show]])});return ne("touchmove",o,{target:n}),()=>l(oe,{name:"van-fade",appear:!0},{default:i})}});const ut=R(rt),dt=S({},nt,{round:Boolean,position:g("center"),closeIcon:g("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:g("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ft,Q]=L("popup");var vt=T({name:ft,inheritAttrs:!1,props:dt,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:t,attrs:n,slots:s}){let o,i;const c=v(),d=v(),h=re(()=>e.show||!e.lazyRender),a=F(()=>{const f={zIndex:c.value};if(q(e.duration)){const x=e.position==="center"?"animationDuration":"transitionDuration";f[x]=`${e.duration}s`}return f}),r=()=>{o||(o=!0,c.value=e.zIndex!==void 0?+e.zIndex:De(),t("open"))},u=()=>{o&&_e(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},y=f=>{t("click-overlay",f),e.closeOnClickOverlay&&u()},m=()=>{if(e.overlay)return l(ut,{show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:y},{default:s["overlay-content"]})},C=f=>{t("click-close-icon",f),u()},I=()=>{if(e.closeable)return l(V,{role:"button",tabindex:0,name:e.closeIcon,class:[Q("close-icon",e.closeIconPosition),Ee],classPrefix:e.iconPrefix,onClick:C},null)},w=()=>t("opened"),N=()=>t("closed"),$=f=>t("keydown",f),H=h(()=>{var f;const{round:x,position:M,safeAreaInsetTop:X,safeAreaInsetBottom:ve}=e;return ae(l("div",G({ref:d,style:a.value,role:"dialog",tabindex:0,class:[Q({round:x,[M]:M}),{"van-safe-area-top":X,"van-safe-area-bottom":ve}],onKeydown:$},n),[(f=s.default)==null?void 0:f.call(s),I()]),[[le,e.show]])}),B=()=>{const{position:f,transition:x,transitionAppear:M}=e,X=f==="center"?"van-fade":`van-popup-slide-${f}`;return l(oe,{name:x||X,appear:M,onAfterEnter:w,onAfterLeave:N},{default:H})};return z(()=>e.show,f=>{f&&!o&&(r(),n.tabindex===0&&Ie(()=>{var x;(x=d.value)==null||x.focus()})),!f&&o&&(o=!1,t("close"))}),ie({popupRef:d}),lt(d,()=>e.show&&e.lockScroll),ne("popstate",()=>{e.closeOnPopstate&&(u(),i=!1)}),se(()=>{e.show&&r()}),Pe(()=>{i&&(t("update:show",!0),i=!1)}),te(()=>{e.show&&e.teleport&&(u(),i=!0)}),pe(ze,()=>e.show),()=>e.teleport?l(Te,{to:e.teleport},{default:()=>[m(),B()]}):l(Be,null,[m(),B()])}});const yt=R(vt);function mt(){const e=Le({show:!1}),t=o=>{e.show=o},n=o=>{S(e,o,{transitionAppear:!0}),t(!0)},s=()=>t(!1);return ie({open:n,close:s,toggle:t}),{open:n,close:s,state:e,toggle:t}}function gt(e){const t=Ae(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}let _=0;function ht(e){e?(_||document.body.classList.add("van-toast--unclickable"),_++):_&&(_--,_||document.body.classList.remove("van-toast--unclickable"))}const[Ct,E]=L("toast"),bt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],kt={icon:String,show:Boolean,type:g("text"),overlay:Boolean,message:O,iconSize:O,duration:$e(2e3),position:g("middle"),teleport:[String,Object],className:U,iconPrefix:String,transition:g("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:U,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ue=T({name:Ct,props:kt,emits:["update:show"],setup(e,{emit:t}){let n,s=!1;const o=()=>{const r=e.show&&e.forbidClick;s!==r&&(s=r,ht(s))},i=r=>t("update:show",r),c=()=>{e.closeOnClick&&i(!1)},d=()=>clearTimeout(n),h=()=>{const{icon:r,type:u,iconSize:y,iconPrefix:m,loadingType:C}=e;if(r||u==="success"||u==="fail")return l(V,{name:r||u,size:y,class:E("icon"),classPrefix:m},null);if(u==="loading")return l(ce,{class:E("loading"),size:y,type:C},null)},a=()=>{const{type:r,message:u}=e;if(q(u)&&u!=="")return r==="html"?l("div",{key:0,class:E("text"),innerHTML:String(u)},null):l("div",{class:E("text")},[u])};return z(()=>[e.show,e.forbidClick],o),z(()=>[e.show,e.type,e.message,e.duration],()=>{d(),e.show&&e.duration>0&&(n=setTimeout(()=>{i(!1)},e.duration))}),se(o),Re(o),()=>l(yt,G({class:[E([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:d,"onUpdate:show":i},Ne(e,bt)),{default:()=>[h(),a()]})}});const de={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let b=[],j=!1,K=S({},de);const Y=new Map;function fe(e){return Ue(e)?e:{message:e}}function St(){const{instance:e,unmount:t}=gt({setup(){const n=v(""),{open:s,state:o,close:i,toggle:c}=mt(),d=()=>{j&&(b=b.filter(a=>a!==e),t())},h=()=>l(ue,G(o,{onClosed:d,"onUpdate:show":c}),null);return z(n,a=>{o.message=a}),ee().render=h,{open:s,clear:i,message:n}}});return e}function Ot(){if(!b.length||j){const e=St();b.push(e)}return b[b.length-1]}function k(e={}){if(!Me)return{};const t=Ot(),n=fe(e);return t.open(S({},K,Y.get(n.type||K.type),n)),t}const Z=e=>t=>k(S({type:e},fe(t)));k.loading=Z("loading");k.success=Z("success");k.fail=Z("fail");k.clear=e=>{var t;b.length&&(e?(b.forEach(n=>{n.clear()}),b=[]):j?(t=b.shift())==null||t.clear():b[0].clear())};function wt(e,t){typeof e=="string"?Y.set(e,t):S(K,e)}k.setDefaultOptions=wt;k.resetDefaultOptions=e=>{typeof e=="string"?Y.delete(e):(K=S({},de),Y.clear())};k.allowMultiple=(e=!0)=>{j=e};k.install=e=>{e.use(R(ue)),e.config.globalProperties.$toast=k};function xt(e){const t=v({});function n(){t.value=k.loading(e)}function s(){t.value.clear()}return{start:n,clear:s}}function It(){const e=Ke(),t=F(()=>e.count);function n(){e.increment()}return{count:t,handleClick:n}}const Pt={getInfo(){return Ye.get("/demo/info")}};function pt(){const e=v("-");async function t(){const{start:n,clear:s}=xt({message:"\u52A0\u8F7D\u4E2D",duration:0,forbidClick:!0});try{n();const o=await Pt.getInfo();e.value=o.title}finally{s()}}return je(()=>{t()}),{title:e}}const zt="view__KzK0f",Tt={view:zt},Dt=T({name:He.INDEX.name,setup(){const{...e}=It(),{...t}=pt();return{...e,...t}},render(){return l("div",{class:Tt.view},[l("h2",null,[this.title]),l("p",null,[this.count]),l(tt,{type:"primary",onClick:this.handleClick},{default:()=>[Xe("\u70B9\u51FB")]})])}});export{Dt as default};
