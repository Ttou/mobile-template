import{c as M,d as S,w as C,o as G,a as J,b as s,m as N,p as K,P as E,e as w,n as I,f as Q,u as x,I as X,L as W,i as Y,g as B,h as Z,j as ee,k as te,r as ne,l as oe,q as se,s as R,t as F,F as P,C as ae,T as ie,v as ce,x as le,y as L,z as re,A as U,B as ue,D as de,E as fe,G as g,H as me,J as pe,K as f,M as $,N as y,O as z,Q as he,R as ge}from"./index-1fd9af35.js";import{_ as ye}from"./_plugin-vue_export-helper-c27b6911.js";let h=0;function ve(e){e?(h||document.body.classList.add("van-toast--unclickable"),h++):h&&(h--,h||document.body.classList.remove("van-toast--unclickable"))}const[_e,p]=M("toast"),ke=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],we={icon:String,show:Boolean,type:w("text"),overlay:Boolean,message:I,iconSize:I,duration:Q(2e3),position:w("middle"),teleport:[String,Object],wordBreak:String,className:x,iconPrefix:String,transition:w("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:x,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var j=S({name:_e,props:we,emits:["update:show"],setup(e,{emit:n,slots:t}){let i,r=!1;const o=()=>{const u=e.show&&e.forbidClick;r!==u&&(r=u,ve(r))},a=u=>n("update:show",u),c=()=>{e.closeOnClick&&a(!1)},l=()=>clearTimeout(i),m=()=>{const{icon:u,type:d,iconSize:O,iconPrefix:V,loadingType:q}=e;if(u||d==="success"||d==="fail")return s(X,{name:u||d,size:O,class:p("icon"),classPrefix:V},null);if(d==="loading")return s(W,{class:p("loading"),size:O,type:q},null)},k=()=>{const{type:u,message:d}=e;if(t.message)return s("div",{class:p("text")},[t.message()]);if(Y(d)&&d!=="")return u==="html"?s("div",{key:0,class:p("text"),innerHTML:String(d)},null):s("div",{class:p("text")},[d])};return C(()=>[e.show,e.forbidClick],o),C(()=>[e.show,e.type,e.message,e.duration],()=>{l(),e.show&&e.duration>0&&(i=setTimeout(()=>{a(!1)},e.duration))}),G(o),J(o),()=>s(E,N({class:[p([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:l,"onUpdate:show":a},K(e,ke)),{default:()=>[m(),k()]})}});const Ce={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let v=[],Se=!1,T=B({},Ce);const Be=new Map;function H(e){return Z(e)?e:{message:e}}function be(){const{instance:e,unmount:n}=te({setup(){const t=ne(""),{open:i,state:r,close:o,toggle:a}=oe(),c=()=>{},l=()=>s(j,N(r,{onClosed:c,"onUpdate:show":a}),null);return C(t,m=>{r.message=m}),se().render=l,{open:i,close:o,message:t}}});return e}function Oe(){if(!v.length||Se){const e=be();v.push(e)}return v[v.length-1]}function Ie(e={}){if(!ee)return{};const n=Oe(),t=H(e);return n.open(B({},T,Be.get(t.type||T.type),t)),n}const xe=e=>n=>Ie(B({type:e},H(n))),Pe=xe("loading");R(j);const[A,$e]=M("space"),ze={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function D(e=[]){const n=[];return e.forEach(t=>{Array.isArray(t)?n.push(...t):t.type===P?n.push(...D(t.children)):n.push(t)}),n.filter(t=>{var i;return!(t&&(t.type===ae||t.type===P&&((i=t.children)==null?void 0:i.length)===0||t.type===ie&&t.children.trim()===""))})}var Te=S({name:A,props:ze,setup(e,{slots:n}){const t=F(()=>{var o;return(o=e.align)!=null?o:e.direction==="horizontal"?"center":""}),i=o=>typeof o=="number"?o+"px":o,r=o=>{const a={},c=`${i(Array.isArray(e.size)?e.size[0]:e.size)}`,l=`${i(Array.isArray(e.size)?e.size[1]:e.size)}`;return o?e.wrap?{marginBottom:l}:{}:(e.direction==="horizontal"&&(a.marginRight=c),(e.direction==="vertical"||e.wrap)&&(a.marginBottom=l),a)};return()=>{var o;const a=D((o=n.default)==null?void 0:o.call(n));return s("div",{class:[$e({[e.direction]:e.direction,[`align-${t.value}`]:t.value,wrap:e.wrap,fill:e.fill})]},[a.map((c,l)=>s("div",{key:`item-${l}`,class:`${A}-item`,style:r(l===a.length-1)},[c]))])}}});const Ae=R(Te);function Me(){const e=ce(),n=F(()=>e.count);function t(){e.increment()}return{count:n,handleClick:t}}const b=le.create({baseURL:"/api"});b.interceptors.request.use(e=>e);b.interceptors.response.use(e=>e.data,e=>{console.log(e)});const Ne={getInfo(){return b.get("/demo/info")}};function Ee(){const e=L({title:"-"});async function n(){const t=Pe({message:"加载中",duration:0,forbidClick:!0});try{const i=await Ne.getInfo();e.title=i.title}finally{t.close()}}return re(()=>{n()}),{...U(e)}}function Re(){const e=L({show:!1,popupRef:{}});function n(){e.show=!0}function t(){console.log("open popup")}return{...U(e),handleShow:n,handleOpen:t}}const Fe=S({name:ue.INDEX.name,components:{Icon:de,Button:fe,Popup:E,Space:Ae},setup(){const e=Me(),n=Ee(),t=Re();return{...e,...n,...t}}});const _=e=>(he("data-v-3ffd94c2"),e=e(),ge(),e),Le={class:"page"},Ue={class:"section"},je=_(()=>f("h3",null,"Store",-1)),He={class:"section"},De=_(()=>f("h3",null,"弹出层",-1)),Ve={class:"section"},qe=_(()=>f("h3",null,"自定义图标",-1)),Ge=_(()=>f("div",{class:"popup__content"},"哈哈",-1));function Je(e,n,t,i,r,o){const a=g("Button"),c=g("Icon"),l=g("Space"),m=g("Popup");return me(),pe("div",Le,[f("h2",null,$(e.title),1),f("div",Ue,[je,f("p",null,$(e.count),1),s(a,{type:"primary",onClick:e.handleClick},{default:y(()=>[z("点击")]),_:1},8,["onClick"])]),f("div",He,[De,s(a,{type:"primary",onClick:e.handleShow},{default:y(()=>[z("点击")]),_:1},8,["onClick"])]),f("div",Ve,[qe,s(l,null,{default:y(()=>[s(c,{icon:"custom:coffee"}),s(c,{icon:"custom:chips"}),s(c,{icon:"custom:ice-cream"}),s(c,{icon:"custom:coke"}),s(c,{icon:"custom:hamburg"})]),_:1})]),s(m,{ref:"popupRef",show:e.show,"onUpdate:show":n[0]||(n[0]=k=>e.show=k),class:"popup",position:"center",closeable:"",onOpen:e.handleOpen},{default:y(()=>[Ge]),_:1},8,["show","onOpen"])])}const We=ye(Fe,[["render",Je],["__scopeId","data-v-3ffd94c2"]]);export{We as default};
